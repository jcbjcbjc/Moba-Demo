{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Battle/UIPopupText.ts"],"names":["_decorator","Component","Label","tween","Vec3","RandomUtil","ccclass","property","UIPopupText","Number","start","InitPopup","type","number","isCrit","isBuff","text","Math","floor","normalDamageText","string","critDamageText","healText","buffDamageText","enabled","time","limit2","floatTime","height","disperse","sign","console","log","node","position","this_","to","x","y","z","easing","onComplete","destroy","union","repeat"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAyBC,MAAAA,I,OAAAA,I;;AAE7DC,MAAAA,U,iBAAAA,U;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;6BAIjBQ,W,WADZF,OAAO,CAAC,aAAD,C,UAGHC,QAAQ,CAACL,KAAD,C,UAERK,QAAQ,CAACL,KAAD,C,UAERK,QAAQ,CAACL,KAAD,C,UAERK,QAAQ,CAACL,KAAD,C,UAERK,QAAQ,CAACE,MAAD,C,oCAXb,MACaD,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAavCS,QAAAA,KAAK,GAAE,CACN;;AAEMC,QAAAA,SAAS,CAACC,IAAD,EAAiBC,MAAjB,EAAgCC,MAAhC,EAAgDC,MAAhD,EAChB;AACI,cAAIC,IAAW,GAAGC,IAAI,CAACC,KAAL,CAAWL,MAAX,IAAmB,EAArC;AACA,eAAKM,gBAAL,CAAsBC,MAAtB,GAA+BJ,IAA/B;AACA,eAAKK,cAAL,CAAoBD,MAApB,GAA6BJ,IAA7B;AACA,eAAKM,QAAL,CAAcF,MAAd,GAAuBJ,IAAvB;AAEA,eAAKO,cAAL,CAAoBC,OAApB,GAA8BT,MAAM,IAAIF,MAAM,GAAG,CAAjD;AACA,eAAKM,gBAAL,CAAsBK,OAAtB,GAAgC,CAACT,MAAD,IAAW,CAACD,MAAZ,IAAsBD,MAAM,GAAG,CAA/D;AACA,eAAKQ,cAAL,CAAoBG,OAApB,GAA8B,CAACT,MAAD,IAAWD,MAAX,IAAqBD,MAAM,GAAG,CAA5D;AACA,eAAKS,QAAL,CAAcE,OAAd,GAAwBX,MAAM,GAAG,CAAjC;AAEA,cAAIY,IAAI,GAAG;AAAA;AAAA,wCAAWC,MAAX,CAAkB,CAAlB,EAAqB,GAArB,IAA4B,KAAKC,SAA5C;AAEA,cAAIC,MAAM,GAAE;AAAA;AAAA,wCAAWF,MAAX,CAAkB,EAAlB,EAAsB,EAAtB,CAAZ;AACA,cAAIG,QAAQ,GAAG;AAAA;AAAA,wCAAWH,MAAX,CAAkB,CAAC,GAAnB,EAAwB,GAAxB,CAAf;AACAG,UAAAA,QAAQ,IAAIZ,IAAI,CAACa,IAAL,CAAUD,QAAV,IAAsB,EAAlC;AAEAE,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAAyB,KAAKC,IAAL,CAAUC,QAA/C;AACA,cAAIC,KAAK,GAAG,IAAZ;AACAhC,UAAAA,KAAK,CAAC,KAAK8B,IAAN,CAAL,CAAiBG,EAAjB,CAAoBX,IAApB,EAA0B;AAACS,YAAAA,QAAQ,EAAG,IAAI9B,IAAJ,CAAS,KAAK6B,IAAL,CAAUC,QAAV,CAAmBG,CAAnB,GAAuBR,QAAhC,EAA0C,KAAKI,IAAL,CAAUC,QAAV,CAAmBI,CAAnB,GAAuBV,MAAjE,EAAyE,KAAKK,IAAL,CAAUC,QAAV,CAAmBK,CAAnB,GAAuBV,QAAhG;AAAZ,WAA1B,EAAkJ;AAACW,YAAAA,MAAM,EAAE,YAAT;AAAuBC,YAAAA,UAAU,EAAC,sBAAU;AAC1LV,cAAAA,OAAO,CAACC,GAAR,CAAY,iCAA+BG,KAAK,CAACF,IAAN,CAAWC,QAAtD;AACAC,cAAAA,KAAK,CAACF,IAAN,CAAWS,OAAX;AACH;AAHiJ,WAAlJ,EAICC,KAJD,GAKCC,MALD,CAKQ,CALR,EAKW;AALX,WAMClC,KAND,GAnBJ,CA4BI;AACA;AACA;AAEH;;AAjDsC,O;;;;;iBAGT,I;;;;;;;iBAEF,I;;;;;;;iBAEN,I;;;;;;;iBAEM,I;;;;;;;iBAEF,G","sourcesContent":["\nimport { _decorator, Component, Node, Label, tween, Tween, tweenUtil, Vec3 } from 'cc';\nimport { PopupType } from './enums/PopupType';\nimport { RandomUtil } from './Utils/RandomUtil';\nimport { UIWorldElement } from './UIWorldElement';\nconst { ccclass, property } = _decorator;\n\n \n@ccclass('UIPopupText')\nexport class UIPopupText extends Component {\n    \n    @property(Label)\n    public normalDamageText:Label=null;\n    @property(Label)\n    public critDamageText:Label=null;\n    @property(Label)\n    public healText:Label=null;\n    @property(Label)\n    public buffDamageText:Label=null;\n    @property(Number)\n    public floatTime:number = 0.5;\n\n    start(){\n    }\n\n    public InitPopup(type:PopupType, number:number, isCrit:boolean, isBuff:boolean):void\n    {\n        let text:string = Math.floor(number)+'';\n        this.normalDamageText.string = text;\n        this.critDamageText.string = text;\n        this.healText.string = text;\n\n        this.buffDamageText.enabled = isBuff && number < 0;\n        this.normalDamageText.enabled = !isBuff && !isCrit && number < 0;\n        this.critDamageText.enabled = !isBuff && isCrit && number < 0;\n        this.healText.enabled = number > 0;\n\n        let time = RandomUtil.limit2(0, 0.5) + this.floatTime;\n\n        let height= RandomUtil.limit2(25, 50);\n        let disperse = RandomUtil.limit2(-0.5, 0.5);\n        disperse += Math.sign(disperse) * 15;\n\n        console.log('UIPopupText InitPopup='+this.node.position)\n        let this_ = this;\n        tween(this.node).to(time, {position : new Vec3(this.node.position.x + disperse, this.node.position.y + height, this.node.position.z + disperse)}, {easing: 'elasticOut', onComplete:function(){\n            console.log('tween UIPopupText InitPopup='+this_.node.position)\n            this_.node.destroy();\n        }})\n        .union()\n        .repeat(1) // 执行 1 次\n        .start();\n        \n\n        // LeanTween.moveX(this.gameObject, this.transform.position.x + disperse, time);\n        // LeanTween.moveZ(this.gameObject, this.transform.position.z + disperse, time);\n        // LeanTween.moveY(this.gameObject, this.transform.position.y + height, time).setEaseOutBack().setDestroyOnComplete(true);\n    \n    }\n}\n\n"]}