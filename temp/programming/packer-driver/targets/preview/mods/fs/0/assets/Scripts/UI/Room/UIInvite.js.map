{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Room/UIInvite.ts"],"names":["_decorator","EditBox","UIWindow","EventManager","EventType","proto","RoomService","UIInviteItem","UIRoom","UIManager","ccclass","property","RoomUser","TeamType","UIInvite","start","RefieshUI","Instance","addListener","OnNickNameSearch_UI","OnMyRoom_RefieshUI","SendNickNameSearch","nickNameInput","string","param","roomUsers","i","uiInviteItem","uiInviteItemArr","length","roomUser","SetItemInfo","node","active","OnSearchClick","OnFollowListClick","uiFollow","show","OnInviteClick","customEventData","console","log","SendInviteRequest","userId","nickName","inviteTeamType","onDestroy","removeAll"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, EditBox } from 'cc';\r\nimport { UIWindow } from '../Common/UIWindow';\r\nimport { EventManager } from '../Common/Event/EventManager';\r\nimport { EventType } from '../Common/Event/EventType';\r\nimport proto from '../../../Proto/proto.js';\r\nimport { RoomService } from '../../Services/RoomService';\r\nimport { UIInviteItem } from './UIInviteItem';\r\nimport { UIRoom } from './UIRoom';\r\nimport { UIFollow } from '../Follow/UIFollow';\r\nimport { UIManager } from '../Common/UIManager';\r\nconst { ccclass, property } = _decorator;\r\nconst { RoomUser, TeamType } = proto;\r\n\r\n@ccclass('UIInvite')\r\nexport class UIInvite extends UIWindow {\r\n    \r\n    @property(EditBox)\r\n    public nickNameInput:EditBox=null as unknown as EditBox;\r\n    @property([UIInviteItem])\r\n    public uiInviteItemArr:Array<UIInviteItem>=[];\r\n\r\n        \r\n\r\n    start () {\r\n        this.RefieshUI();\r\n        EventManager.Instance.addListener(EventType.OnNickNameSearch_UI,this.OnNickNameSearch_UI,this); \r\n        EventManager.Instance.addListener(EventType.OnMyRoom_RefieshUI,this.RefieshUI,this); \r\n    }\r\n\r\n    public RefieshUI(){\r\n        RoomService.Instance.SendNickNameSearch(this.nickNameInput.string);\r\n    }\r\n\r\n    public OnNickNameSearch_UI(param: any){\r\n        let roomUsers = param[0] as Array<RoomUser>;\r\n        for(let i=0; i < 3; i++){\r\n            let uiInviteItem=this.uiInviteItemArr[i];\r\n            if(i < roomUsers.length){\r\n               let roomUser=roomUsers[i];\r\n               uiInviteItem.SetItemInfo(roomUser);\r\n               uiInviteItem.node.active=true;\r\n            }else{\r\n                uiInviteItem.node.active=false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 搜索点击\r\n     */\r\n    OnSearchClick(){\r\n        this.RefieshUI();\r\n    }\r\n\r\n    /**\r\n     * 关注列表点击\r\n     */\r\n    async OnFollowListClick(){\r\n        let uiFollow = await UIManager.Instance.show(\"UIFollow\") as UIFollow;\r\n\r\n    }\r\n\r\n    /**\r\n     * 邀请点击\r\n     */\r\n    OnInviteClick(param:any,customEventData:any){\r\n        console.log(customEventData)\r\n        let uiInviteItem=this.uiInviteItemArr[customEventData-1];\r\n        RoomService.Instance.SendInviteRequest(uiInviteItem.roomUser.userId, uiInviteItem.roomUser.nickName, UIRoom.inviteTeamType);\r\n    }\r\n\r\n    onDestroy(){\r\n        console.log('onDestroy')\r\n        EventManager.Instance.removeAll(this);\r\n    }\r\n}"]}