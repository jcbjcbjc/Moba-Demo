{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/UICharacterDetail/UICharacterDetail.ts"],"names":["_decorator","Node","Label","Sprite","Button","UIWindow","UIManager","User","LoadResUtil","DataManager","EventManager","EventType","proto","UserService","FollowManager","CharacterClass","NUser","AttrPromoteType","AttrPromoteInfoResponse","CharacterDetailResponse","Result","FollowResponse","ccclass","property","UICharacterDetail","start","Instance","addListener","OnSwitchCharacter_UI","OnFollowRes_UI","OnCharacterDetail_UI","SendCharacterDetail","userId","tCharacterId","openMode","console","log","user","id","myGroup","active","otherGroup","character","tid","switchButton","node","param","response","result","Failed","Close","nicknameLabel","string","nickname","characterSprite","spriteFrame","load_local_sprite","characters","cid","Avatar","levelLabel","level","expLabel","exp","attLabel","att","attSpotLabel","attSpot","defLabel","def","defSpotLabel","defSpot","hpLabel","hp","hpSpotLabel","hpSpot","criLabel","cri","criSpotLabel","criSpot","resuLabel","resu","resuSpotLabel","resuSpot","speedLabel","speed","speedSpotLabel","speedSpot","cdLabel","cd","cdSpotLabel","cdSpot","cancelFollowButton","isFollow","followButton","skillMap","skills","index","skillId","define","skillSpriteArr","Icon","SwitchCharacter","SendSwitchCharacter","OpenUIPromote","customEventData","uiPromote","show","spot","Att","Def","Hp","Cri","Resu","Speed","Cd","SetPromoteDetail","UpdateAttrPromote","attrPromoteType","attrPromoteInfoResponse","attrValue","OnClickBag","uiBag","SetUpOpenMode","OnClickTran","uiTran","SetUserLoadList","OnClickFollow","SendFollow","OnClickCancelFollow","OnClickPrivateChat","uiChat","ChangeChatChannel","onDestroy","removeAll"],"mappings":"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","sourcesContent":["import { UIWindow } from \"../Common/UIWindow\";\r\nimport { _decorator, Component, Node, Label, Sprite, SpriteFrame, loader, resources, director, Font, Prefab, instantiate, Button } from 'cc';\r\nimport { MessageBox } from '../Common/MessageBox';\r\nimport { UIManager } from '../Common/UIManager';\r\nimport { UISystemConfig } from '../UISystemConfig';\r\nimport { User } from '../../Models/User';\r\nimport { LoadResUtil } from '../../Utils/LoadResUtil';\r\nimport { DataManager } from '../../Managers/DataManager';\r\nimport { TabView } from '../Common/TabView/TabView';\r\nimport { EventManager } from '../Common/Event/EventManager';\r\nimport { EventType } from '../Common/Event/EventType';\r\nimport { CharacterDefine } from '../../Data/CharacterDefine';\r\nimport proto from '../../../Proto/proto.js';\r\nimport { ListView } from '../Common/ListView/ListView';\r\nimport { ListViewItem } from '../Common/ListView/ListViewItem';\r\nimport { UserService } from \"../../Services/UserService\";\r\nimport { UIPromote } from \"./UIPromote\";\r\nimport { UIBag } from \"../Bag/UIBag\";\r\nimport { UITran } from \"../Tran/UITran\";\r\nimport { CombatPowerRankingManager } from \"../../Managers/CombatPowerRankingManager\";\r\nimport { FollowManager } from \"../../Managers/FollowManager\";\r\nimport { UIChat } from \"../Chat/UIChat\";\r\nconst { CharacterClass, NUser, AttrPromoteType, AttrPromoteInfoResponse, CharacterDetailResponse, Result, FollowResponse } = proto;\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('UICharacterDetail')\r\nexport class UICharacterDetail extends UIWindow {\r\n\r\n    @property(Label)\r\n    public nicknameLabel = null as unknown as Label;\r\n    @property(Sprite)\r\n    public characterSprite = null as unknown as Sprite;\r\n    @property(Label)\r\n    public levelLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public expLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public attLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public attSpotLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public defLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public defSpotLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public hpLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public hpSpotLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public criLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public criSpotLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public resuLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public resuSpotLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public speedLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public speedSpotLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public cdLabel = null as unknown as Label;\r\n    @property(Label)\r\n    public cdSpotLabel = null as unknown as Label;\r\n    @property([Sprite])\r\n    public skillSpriteArr = [];\r\n    @property(Button)\r\n    public attPromoteButton = null as unknown as Button;\r\n    @property(Button)\r\n    public defPromoteButton = null as unknown as Button;\r\n    @property(Button)\r\n    public hpPromoteButton = null as unknown as Button;\r\n    @property(Button)\r\n    public criPromoteButton = null as unknown as Button;\r\n    @property(Button)\r\n    public resuPromoteButton = null as unknown as Button;\r\n    @property(Button)\r\n    public speedPromoteButton = null as unknown as Button;\r\n    @property(Button)\r\n    public cdPromoteButton = null as unknown as Button;\r\n    @property(Button)\r\n    public switchButton = null as unknown as Button;\r\n    @property(Button)\r\n    public bagButton = null as unknown as Button;\r\n    @property(Button)\r\n    public transButton = null as unknown as Button;\r\n    @property(Button)\r\n    public privChatButton = null as unknown as Button;\r\n    @property(Node)\r\n    public myGroup = null as unknown as Node;\r\n    @property(Node)\r\n    public otherGroup = null as unknown as Node;\r\n    @property(Node)\r\n    public cancelFollowButton = null as unknown as Node;\r\n    @property(Node)\r\n    public followButton = null as unknown as Node;\r\n\r\n    private userId: number = 0;\r\n    private tCharacterId: number = 0;\r\n    private user: NUser = null as unknown as NUser;\r\n\r\n    start() {\r\n        EventManager.Instance.addListener(EventType.OnSwitchCharacter_UI, this.OnSwitchCharacter_UI, this);\r\n        EventManager.Instance.addListener(EventType.OnFollowRes_UI, this.OnFollowRes_UI, this);\r\n        EventManager.Instance.addListener(EventType.OnCharacterDetail_UI, this.OnCharacterDetail_UI, this);\r\n    }\r\n\r\n\r\n    /**\r\n     * 查看英雄详情\r\n     * @param userId  用户id \r\n     * @param tCharacterId  角色数据库id\r\n     * @param openMode  打开方式 1、英雄详细打开 2、其它点击\r\n     */\r\n    public SendCharacterDetail(userId: number, tCharacterId: number, openMode: number = 1) {\r\n        console.log('SendCharacterDetail userId=' + userId + '，tCharacterId=' + tCharacterId)\r\n        this.userId = userId;\r\n        this.tCharacterId = tCharacterId;\r\n        UserService.Instance.SendCharacterDetail(this.userId, this.tCharacterId);\r\n        if (this.userId == User.Instance.user.id) {\r\n            this.myGroup.active = openMode == 1 ? true : false;\r\n            this.otherGroup.active = false;\r\n        } else {\r\n            this.myGroup.active = false;\r\n            this.otherGroup.active = true;\r\n        }\r\n        if (this.userId == User.Instance.user.id && this.tCharacterId == User.Instance.user.character.tid) {\r\n            this.switchButton.node.active = false;\r\n        } else {\r\n            this.switchButton.node.active = true;\r\n        }\r\n    }\r\n\r\n    private async OnCharacterDetail_UI(param: any) {\r\n        console.log('OnCharacterDetail_UI')\r\n        let response = param[0] as CharacterDetailResponse;\r\n        let user = response.user as any;\r\n        this.user = user;\r\n        if (response.result == Result.Failed) {\r\n            this.Close();\r\n            return;\r\n        }\r\n        this.nicknameLabel.string = '昵称：' + user.nickname;\r\n        this.characterSprite.spriteFrame = await LoadResUtil.load_local_sprite(DataManager.Instance.characters[user.character?.cid].Avatar + '/spriteFrame');\r\n        this.levelLabel.string = '等级：' + user.character?.level;\r\n        this.expLabel.string = '经验：' + user.character?.exp;\r\n        this.attLabel.string = '攻击力：' + user.character?.att;\r\n        this.attSpotLabel.string = '+' + user.character?.attSpot;\r\n        this.defLabel.string = '防御力：' + user.character?.def;\r\n        this.defSpotLabel.string = '+' + user.character?.defSpot;\r\n        this.hpLabel.string = '血量：' + user.character?.hp;\r\n        this.hpSpotLabel.string = '+' + user.character?.hpSpot;\r\n        this.criLabel.string = '暴击率：' + user.character?.cri;\r\n        this.criSpotLabel.string = '+' + user.character?.criSpot;\r\n        this.resuLabel.string = '复活率：' + user.character?.resu;\r\n        this.resuSpotLabel.string = '+' + user.character?.resuSpot;\r\n        this.speedLabel.string = '速度：提升' + user.character?.speed + \"%\";\r\n        this.speedSpotLabel.string = '+' + user.character?.speedSpot;\r\n        this.cdLabel.string = 'cd：降低' + user.character?.cd + \"%\";\r\n        this.cdSpotLabel.string = '+' + user.character?.cdSpot;\r\n\r\n        this.cancelFollowButton.active = user.isFollow;\r\n        this.followButton.active = !user.isFollow;\r\n\r\n        let skillMap = DataManager.Instance.skills[user.character?.cid];\r\n        let index = 0;\r\n        for (var skillId in skillMap) {\r\n            let define = skillMap[skillId];\r\n            this.skillSpriteArr[index].spriteFrame = await LoadResUtil.load_local_sprite(define.Icon + '/spriteFrame');\r\n            index++;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 切换英雄\r\n     */\r\n    private SwitchCharacter() {\r\n        UserService.Instance.SendSwitchCharacter(this.tCharacterId);\r\n    }\r\n\r\n    /**\r\n     * 切换英雄成功响应\r\n     */\r\n    private OnSwitchCharacter_UI() {\r\n        this.Close();\r\n    }\r\n\r\n    /**\r\n     * 打开提升界面\r\n     */\r\n    public async OpenUIPromote(param: any, customEventData: any) {\r\n        console.log(customEventData)\r\n        let uiPromote = await UIManager.Instance.show(\"UIPromote\") as UIPromote;\r\n        let spot: number = 0;\r\n        if (customEventData == AttrPromoteType.Att) {\r\n            spot = this.user.character?.attSpot as number;\r\n        } else if (customEventData == AttrPromoteType.Def) {\r\n            spot = this.user.character?.defSpot as number;\r\n        } else if (customEventData == AttrPromoteType.Hp) {\r\n            spot = this.user.character?.hpSpot as number;\r\n        } else if (customEventData == AttrPromoteType.Cri) {\r\n            spot = this.user.character?.criSpot as number;\r\n        } else if (customEventData == AttrPromoteType.Resu) {\r\n            spot = this.user.character?.resuSpot as number;\r\n        } else if (customEventData == AttrPromoteType.Speed) {\r\n            spot = this.user.character?.speedSpot as number;\r\n        } else if (customEventData == AttrPromoteType.Cd) {\r\n            spot = this.user.character?.cdSpot as number;\r\n        }\r\n        uiPromote.SetPromoteDetail(this.tCharacterId, customEventData, spot, this);\r\n    }\r\n\r\n    /**\r\n     * 更新属性提升\r\n     */\r\n    public UpdateAttrPromote(attrPromoteType: AttrPromoteType, attrPromoteInfoResponse: AttrPromoteInfoResponse) {\r\n        if (attrPromoteType == AttrPromoteType.Att) {\r\n            this.attLabel.string = '攻击力：' + attrPromoteInfoResponse.attrValue;\r\n            this.attSpotLabel.string = '+' + attrPromoteInfoResponse.spot;\r\n            this.user.character.att = attrPromoteInfoResponse.attrValue;\r\n            this.user.character.attSpot = attrPromoteInfoResponse.spot;\r\n        } else if (attrPromoteType == AttrPromoteType.Def) {\r\n            this.defLabel.string = '防御力：' + attrPromoteInfoResponse.attrValue;\r\n            this.defSpotLabel.string = '+' + attrPromoteInfoResponse.spot;\r\n            this.user.character.def = attrPromoteInfoResponse.attrValue;\r\n            this.user.character.defSpot = attrPromoteInfoResponse.spot;\r\n        } else if (attrPromoteType == AttrPromoteType.Hp) {\r\n            this.hpLabel.string = '血量：' + attrPromoteInfoResponse.attrValue;\r\n            this.hpSpotLabel.string = '+' + attrPromoteInfoResponse.spot;\r\n            this.user.character.hp = attrPromoteInfoResponse.attrValue;\r\n            this.user.character.hpSpot = attrPromoteInfoResponse.spot;\r\n        } else if (attrPromoteType == AttrPromoteType.Cri) {\r\n            this.criLabel.string = '暴击率：' + attrPromoteInfoResponse.attrValue;\r\n            this.criSpotLabel.string = '+' + attrPromoteInfoResponse.spot;\r\n            this.user.character.cri = attrPromoteInfoResponse.attrValue;\r\n            this.user.character.criSpot = attrPromoteInfoResponse.spot;\r\n        } else if (attrPromoteType == AttrPromoteType.Resu) {\r\n            this.resuLabel.string = '复活率：' + attrPromoteInfoResponse.attrValue;\r\n            this.resuSpotLabel.string = '+' + attrPromoteInfoResponse.spot;\r\n            this.user.character.resu = attrPromoteInfoResponse.attrValue;\r\n            this.user.character.resuSpot = attrPromoteInfoResponse.spot;\r\n        } else if (attrPromoteType == AttrPromoteType.Speed) {\r\n            this.speedLabel.string = '速度：提升' + attrPromoteInfoResponse.attrValue + '%';\r\n            this.speedSpotLabel.string = '+' + attrPromoteInfoResponse.spot;\r\n            this.user.character.speed = attrPromoteInfoResponse.attrValue;\r\n            this.user.character.speedSpot = attrPromoteInfoResponse.spot;\r\n        } else if (attrPromoteType == AttrPromoteType.Cd) {\r\n            this.cdLabel.string = 'cd：降低' + attrPromoteInfoResponse.attrValue + '%';\r\n            this.cdSpotLabel.string = '+' + attrPromoteInfoResponse.spot;\r\n            this.user.character.cd = attrPromoteInfoResponse.attrValue;\r\n            this.user.character.cdSpot = attrPromoteInfoResponse.spot;\r\n        }\r\n    }\r\n\r\n    public async OnClickBag() {\r\n        let uiBag = await UIManager.Instance.show(\"UIBag\") as UIBag;\r\n        uiBag.SetUpOpenMode(1);\r\n    }\r\n\r\n    public async OnClickTran() {\r\n        let uiTran = await UIManager.Instance.show(\"UITran\") as UITran;\r\n        uiTran.SetUserLoadList(this.userId);\r\n    }\r\n\r\n    /**\r\n     * 点击关注\r\n     */\r\n    public async OnClickFollow() {\r\n        FollowManager.Instance.SendFollow(this.user.id, true);\r\n    }\r\n\r\n    /**\r\n     * 点击取消关注\r\n     */\r\n    public async OnClickCancelFollow() {\r\n        FollowManager.Instance.SendFollow(this.user.id, false);\r\n    }\r\n\r\n    /**\r\n     * 关注/取消关注响应\r\n     */\r\n    private OnFollowRes_UI(param: any) {\r\n        let response = param[0] as FollowResponse;\r\n        this.cancelFollowButton.active = FollowManager.Instance.isFollow;\r\n        this.followButton.active = !FollowManager.Instance.isFollow;\r\n    }\r\n\r\n    /**\r\n     * 点击私聊\r\n     */\r\n    public async OnClickPrivateChat() {\r\n        let uiChat = await UIManager.Instance.show(\"UIChat\") as UIChat;\r\n        uiChat.ChangeChatChannel(1, this.user);\r\n    }\r\n\r\n    onDestroy() {\r\n        EventManager.Instance.removeAll(this);\r\n    }\r\n}"]}