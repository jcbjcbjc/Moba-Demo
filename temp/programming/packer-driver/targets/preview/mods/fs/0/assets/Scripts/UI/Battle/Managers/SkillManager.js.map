{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Battle/Managers/SkillManager.ts"],"names":["SkillManager","Skill","DataManager","SkillType","constructor","owner","Owner","InitSkills","Skills","Infos","skillMap","Instance","skills","characterDefine","ID","skillId","define","push","skill","Type","Normal","NormalSkill","AddSkill","GetSkill","i","length","Define","LogicUpdate","frameId"],"mappings":";;;6DAKaA,Y;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAJJC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;8BAEIH,Y,GAAN,MAAMA,YAAN,CAAkB;AAQdI,QAAAA,WAAW,CAACC,KAAD,EAClB;AAAA;;AAAA;;AAAA,0CAL6B,EAK7B;;AAAA,yCAH6B,EAG7B;;AACI,eAAKC,KAAL,GAAaD,KAAb;AACA,eAAKE,UAAL;AACH;;AAEOA,QAAAA,UAAU,GAClB;AACI,eAAKC,MAAL,GAAc,EAAd;AACA,eAAKC,KAAL,GAAa,EAAb;AAEA,cAAIC,QAAQ,GAAG;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,MAArB,CAA4B,KAAKN,KAAL,CAAWO,eAAX,CAA2BC,EAAvD,CAAf;;AACA,eAAK,IAAIC,OAAT,IAAoBL,QAApB,EACA;AACI,gBAAIM,MAAM,GAAGN,QAAQ,CAACK,OAAD,CAArB,CADJ,CAEI;;AAEA,iBAAKN,KAAL,CAAWQ,IAAX,CAAgBD,MAAM,CAACF,EAAvB;AACA,gBAAII,KAAK,GAAG;AAAA;AAAA,gCAAUF,MAAM,CAACF,EAAjB,EAAqB,KAAKR,KAA1B,CAAZ;;AACA,gBAAIU,MAAM,CAACG,IAAP,IAAe;AAAA;AAAA,wCAAUC,MAA7B,EACA;AACI,mBAAKC,WAAL,GAAmBH,KAAnB;AACH;;AACD,iBAAKI,QAAL,CAAcJ,KAAd;AACH;AACJ;;AAEOI,QAAAA,QAAQ,CAACJ,KAAD,EAChB;AACI,eAAKV,MAAL,CAAYS,IAAZ,CAAiBC,KAAjB;AACH;;AAEMK,QAAAA,QAAQ,CAACR,OAAD,EACf;AACI,eAAI,IAAIS,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKhB,MAAL,CAAYiB,MAA/B,EAAuCD,CAAC,EAAxC,EACA;AACI,gBAAI,KAAKhB,MAAL,CAAYgB,CAAZ,EAAeE,MAAf,CAAsBZ,EAAtB,IAA4BC,OAAhC,EACI,OAAO,KAAKP,MAAL,CAAYgB,CAAZ,CAAP;AACP;;AACD,iBAAO,IAAP;AACH;;AAEMG,QAAAA,WAAW,CAACC,OAAD,EAClB;AACI,eAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhB,MAAL,CAAYiB,MAAhC,EAAwCD,CAAC,EAAzC,EACA;AACK,iBAAKhB,MAAL,CAAYgB,CAAZ,EAAeG,WAAf,CAA2BC,OAA3B;AACJ;AACJ;;AAxDoB,O","sourcesContent":["import { Creature } from \"../Enities/Creature\";\r\nimport { Skill } from \"../Models/Skill\";\r\nimport { DataManager } from \"../../../Managers/DataManager\";\r\nimport { SkillType } from \"../enums/SkillType\";\r\n\r\nexport class SkillManager{\r\n    public Owner:Creature;\r\n    public NormalSkill:Skill;\r\n\r\n    public Skills:Array<Skill> = [];\r\n\r\n    public Infos:Array<number> = [];\r\n\r\n    public constructor(owner:Creature)\r\n    {\r\n        this.Owner = owner;\r\n        this.InitSkills();\r\n    }\r\n\r\n    private InitSkills()\r\n    {\r\n        this.Skills = [];\r\n        this.Infos = [];\r\n\r\n        let skillMap = DataManager.Instance.skills[this.Owner.characterDefine.ID];\r\n        for (var skillId in skillMap)\r\n        {\r\n            let define = skillMap[skillId];\r\n            // console.log(JSON.stringify(define))\r\n\r\n            this.Infos.push(define.ID);\r\n            let skill = new Skill(define.ID, this.Owner);\r\n            if (define.Type == SkillType.Normal)\r\n            {\r\n                this.NormalSkill = skill;\r\n            }\r\n            this.AddSkill(skill);\r\n        }\r\n    }\r\n\r\n    private AddSkill(skill:Skill)\r\n    {\r\n        this.Skills.push(skill);\r\n    }\r\n\r\n    public GetSkill(skillId:number):Skill\r\n    {\r\n        for(let i = 0; i < this.Skills.length; i++)\r\n        {\r\n            if (this.Skills[i].Define.ID == skillId)\r\n                return this.Skills[i];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public LogicUpdate(frameId: number)\r\n    {\r\n        for (let i = 0; i < this.Skills.length; i++)\r\n        {\r\n             this.Skills[i].LogicUpdate(frameId);\r\n        }\r\n    }\r\n}"]}