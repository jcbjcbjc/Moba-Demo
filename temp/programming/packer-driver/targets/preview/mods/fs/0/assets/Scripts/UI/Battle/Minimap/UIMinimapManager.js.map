{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Battle/Minimap/UIMinimapManager.ts"],"names":["_decorator","Component","Node","UITransform","instantiate","Vec3","UIMinimapCharacter","CharacterManager","MinimapBoxVo","ccclass","property","UIMinimapManager","onLoad","Instance","Init","boxBgVec3","minimapSize","node","getComponent","contentSize","minimapBoxVo","x","z","minimapBoundingBox","worldPosition","width","height","CreateMinimapCharacter","characterList","minimapCharacterPrfab","active","i","length","character","minimapCharacterNode","uiMinimapCharacter","addChild","SetItemInfo"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,W,OAAAA,W;AAA4CC,MAAAA,I,OAAAA,I;;AAG5FC,MAAAA,kB,iBAAAA,kB;;AACAC,MAAAA,gB,iBAAAA,gB;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;kCAGjBW,gB,WADZF,OAAO,CAAC,kBAAD,C,UAKHC,QAAQ,CAACR,IAAD,C,UAERQ,QAAQ,CAACR,IAAD,C,8CAPb,MACaS,gBADb,SACsCV,SADtC,CACgD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,gDAQR,IARQ;AAAA;;AAU5CW,QAAAA,MAAM,GAAI;AACND,UAAAA,gBAAgB,CAACE,QAAjB,GAA0B,IAA1B;AACH,SAZ2C,CAc7C;;;AACCC,QAAAA,IAAI,GAAI;AACJ,cAAIC,SAAS,GAAG,IAAIV,IAAJ,CAAS,EAAT,EAAa,CAAb,EAAgB,EAAhB,CAAhB,CADI,CACgC;;AACpC,cAAIW,WAAW,GAAC,KAAKC,IAAL,CAAUC,YAAV,CAAuBf,WAAvB,EAAoCgB,WAApD;AACA,eAAKC,YAAL,GAAkB;AAAA;AAAA,4CAAiBL,SAAS,CAACM,CAA3B,EAA8BN,SAAS,CAACO,CAAxC,EAA2C,KAAKC,kBAAL,CAAwBC,aAAxB,CAAsCH,CAAjF,EACd,KAAKE,kBAAL,CAAwBC,aAAxB,CAAsCF,CADxB,EAC2BN,WAAW,CAACS,KADvC,EAC8CT,WAAW,CAACU,MAD1D,CAAlB;AAEA,eAAKC,sBAAL;AACH;AAED;AACJ;AACA;;;AACIA,QAAAA,sBAAsB,GAAE;AACpB,cAAIC,aAAa,GAAG;AAAA;AAAA,oDAAiBf,QAAjB,CAA0Be,aAA9C;AACA,eAAKC,qBAAL,CAA2BC,MAA3B,GAAkC,IAAlC;;AACA,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,aAAa,CAACI,MAA5B,EAAmCD,CAAC,EAApC,EAAuC;AACpC,gBAAIE,SAAS,GAAGL,aAAa,CAACG,CAAD,CAA7B;AACE,gBAAIG,oBAAoB,GAAG9B,WAAW,CAAC,KAAKyB,qBAAN,CAAtC;AACA,gBAAIM,kBAAkB,GAAGD,oBAAoB,CAAChB,YAArB;AAAA;AAAA,yDAAzB;AACA,iBAAKD,IAAL,CAAUmB,QAAV,CAAmBF,oBAAnB;AACAC,YAAAA,kBAAkB,CAACE,WAAnB,CAA+BJ,SAA/B,EAA0C,KAAKb,YAA/C;AACJ;;AACD,eAAKS,qBAAL,CAA2BC,MAA3B,GAAkC,KAAlC;AACH;;AArC2C,O,uCAEJ,I;;;;;iBAGN,I;;;;;;;iBAEG,I","sourcesContent":["\r\nimport { _decorator, Component, Node, UITransform, Rect, instantiate, MeshRenderer, /*BoxCollider,*/ Vec3 } from 'cc';\r\nimport { TeamType2 } from '../enums/TeamType2';\r\nimport { User } from '../../../Models/User';\r\nimport { UIMinimapCharacter } from './UIMinimapCharacter';\r\nimport { CharacterManager } from '../Managers/CharacterManager';\r\nimport { MinimapBoxVo } from '../../../Vo/MinimapBoxVo';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('UIMinimapManager')\r\nexport class UIMinimapManager extends Component {\r\n\r\n    public static Instance:UIMinimapManager=null;\r\n   \r\n    @property(Node)\r\n    private minimapBoundingBox:Node = null;\r\n    @property(Node)\r\n    private minimapCharacterPrfab:Node = null;\r\n    private minimapBoxVo:MinimapBoxVo = null;\r\n\r\n    onLoad () {\r\n        UIMinimapManager.Instance=this;\r\n    }\r\n\r\n   //BoxCollider 编辑器可用查看地图大小，在运行状态下不可用，因为是3D物理的库\r\n    Init () {\r\n        let boxBgVec3 = new Vec3(32, 1, 72);//this.minimapBoundingBox.getComponent(BoxCollider).size;\r\n        let minimapSize=this.node.getComponent(UITransform).contentSize;\r\n        this.minimapBoxVo=new MinimapBoxVo(boxBgVec3.x, boxBgVec3.z, this.minimapBoundingBox.worldPosition.x, \r\n            this.minimapBoundingBox.worldPosition.z, minimapSize.width, minimapSize.height);\r\n        this.CreateMinimapCharacter();\r\n    }\r\n\r\n    /**\r\n     * 创建小地图角色\r\n     */\r\n    CreateMinimapCharacter(){\r\n        let characterList = CharacterManager.Instance.characterList;\r\n        this.minimapCharacterPrfab.active=true;\r\n        for(let i=0;i<characterList.length;i++){\r\n           let character = characterList[i];\r\n             let minimapCharacterNode = instantiate(this.minimapCharacterPrfab);\r\n             let uiMinimapCharacter = minimapCharacterNode.getComponent(UIMinimapCharacter) as UIMinimapCharacter;\r\n             this.node.addChild(minimapCharacterNode);\r\n             uiMinimapCharacter.SetItemInfo(character, this.minimapBoxVo);\r\n        }\r\n        this.minimapCharacterPrfab.active=false;\r\n    }\r\n\r\n\r\n   \r\n}\r\n"]}