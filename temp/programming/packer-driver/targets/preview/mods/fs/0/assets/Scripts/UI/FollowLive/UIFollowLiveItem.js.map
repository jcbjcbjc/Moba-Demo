{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/FollowLive/UIFollowLiveItem.ts"],"names":["_decorator","Node","Label","Sprite","SystemEventType","Color","UIManager","LoadResUtil","DataManager","proto","ListViewItem","RoomService","CharacterClass","UnLockCharacter","NUser","TeamType","ccclass","property","UIFollowLiveItem","start","node","on","TOUCH_END","OnPointerClick","onClcik","console","log","uiCharacterDetail","Instance","show","SendCharacterDetail","user","id","SetItemInfo","follow","selectedIndex","define","characters","character","cid","nameLabel","string","Name","img","spriteFrame","load_local_sprite","Avatar","nickNameLabel","nickname","levelLabel","level","enterButtonNode","active","blueBiFenLabel","redBiFenLabel","biFenLabel","numLabel","biFenArr","biFen","split","blueBiFenText","redBiFenText","blueColor","redColor","teamType","My","color","fromHEX","roomNum","OnAddLive","SendAddLive","onDestroy"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label, Sprite, SpriteFrame, loader, resources, director, Font, Prefab, instantiate, SystemEventType, Color } from 'cc';\r\nimport { MessageBox, MessageBoxType } from '../Common/MessageBox';\r\nimport { UIManager } from '../Common/UIManager';\r\nimport { UISystemConfig } from '../UISystemConfig';\r\nimport { User } from '../../Models/User';\r\nimport { LoadResUtil } from '../../Utils/LoadResUtil';\r\nimport { DataManager } from '../../Managers/DataManager';\r\nimport { TabView } from '../Common/TabView/TabView';\r\nimport { EventManager } from '../Common/Event/EventManager';\r\nimport { EventType } from '../Common/Event/EventType';\r\nimport { CharacterDefine } from '../../Data/CharacterDefine';\r\nimport proto from '../../../Proto/proto.js';\r\nimport { ListViewItem } from '../Common/ListView/ListViewItem';\r\nimport { UserService } from '../../Services/UserService';\r\nimport { UICharacterDetail } from '../UICharacterDetail/UICharacterDetail';\r\nimport { TipsManager } from '../TipsManager';\r\nimport { RoomService } from '../../Services/RoomService';\r\nconst { CharacterClass,UnLockCharacter,NUser,TeamType }=proto;\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('UIFollowLiveItem')\r\nexport class UIFollowLiveItem extends ListViewItem {\r\n \r\n    @property(Sprite)\r\n    public img:Sprite=null;\r\n    @property(Label)\r\n    public nameLabel:Label=null;\r\n    @property(Label)\r\n    public blueBiFenLabel:Label=null;\r\n    @property(Label)\r\n    public redBiFenLabel:Label=null;\r\n    @property(Label)\r\n    public nickNameLabel:Label=null;\r\n    @property(Label)\r\n    public levelLabel:Label=null;\r\n    @property(Label)\r\n    public biFenLabel:Label=null;\r\n    @property(Label)\r\n    public numLabel:Label=null;\r\n    @property(Node)\r\n    public enterButtonNode:Node=null;\r\n    private user:NUser=null;\r\n\r\n    start (){\r\n        this.node.on(SystemEventType.TOUCH_END,this.OnPointerClick,this);\r\n    }\r\n\r\n    // public onSelected(selected:boolean):void{\r\n    //     console.log('selected='+selected)\r\n    // }\r\n    \r\n    /**\r\n     * 点击响应\r\n     */\r\n    public async onClcik():void{\r\n        console.log('onClcik')\r\n        let uiCharacterDetail = await UIManager.Instance.show(\"UICharacterDetail\") as UICharacterDetail;\r\n        uiCharacterDetail.SendCharacterDetail(this.user.id, 0, 2);\r\n    }\r\n\r\n\r\n    public async SetItemInfo(follow:NUser, selectedIndex:number):void{\r\n        this.user = follow;\r\n       let define = DataManager.Instance.characters[follow.character.cid];\r\n\r\n       this.nameLabel.string=define.Name;\r\n       this.img.spriteFrame = await LoadResUtil.load_local_sprite(define.Avatar+'/spriteFrame');\r\n       this.nickNameLabel.string='昵称:'+follow.nickname;\r\n       this.levelLabel.string='Lv:'+follow.character.level;\r\n       if(selectedIndex==0){  //直播中\r\n        this.enterButtonNode.active = true;\r\n        this.blueBiFenLabel.node.active=true;\r\n        this.redBiFenLabel.node.active=true;\r\n        this.biFenLabel.node.active=true;        \r\n        this.numLabel.node.active=true;\r\n        let biFenArr = (follow.biFen+'' || '0:0').split(':');\r\n        let blueBiFenText='';\r\n        let redBiFenText='';\r\n        let blueColor='';\r\n        let redColor='';\r\n        if(follow.teamType==TeamType.My){  //蓝队\r\n            blueColor='#FF0000'; //红\r\n            redColor='#000000';\r\n            blueBiFenText=biFenArr[0];\r\n            redBiFenText=':'+biFenArr[1];\r\n        }else{\r\n            blueColor='#000000';   \r\n            redColor='#FF0000';  //红\r\n            blueBiFenText=biFenArr[0]+':';\r\n            redBiFenText=biFenArr[1];\r\n        }\r\n        // this.blueBiFenLabel.color.fromHEX(blueColor);\r\n        // this.redBiFenLabel.color.fromHEX(redColor);  \r\n        this.blueBiFenLabel.color = new Color().fromHEX(blueColor);\r\n        this.redBiFenLabel.color = new Color().fromHEX(redColor);\r\n        \r\n        this.blueBiFenLabel.string = blueBiFenText;\r\n        this.redBiFenLabel.string = redBiFenText;\r\n        this.numLabel.string = '人数:'+(follow.roomNum || 0);\r\n       }else{\r\n        this.enterButtonNode.active = false;\r\n        this.blueBiFenLabel.node.active=false;\r\n        this.redBiFenLabel.node.active=false;\r\n        this.biFenLabel.node.active=false;        \r\n        this.numLabel.node.active=false;\r\n       }\r\n\r\n    }\r\n\r\n    /**\r\n     * 进入直播\r\n     */\r\n    public OnAddLive(){\r\n        RoomService.Instance.SendAddLive(this.user.id);\r\n    }\r\n\r\n    onDestroy(){\r\n        \r\n    }\r\n\r\n}\r\n"]}