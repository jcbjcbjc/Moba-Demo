{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Common/UIManager.ts"],"names":["UIElement","UIManager","instantiate","js","director","HashMap","SoundManager","SoundDefine","LoadResUtil","constructor","resource","cache","Resource","Cache","Init","UIResource","put","show","UIName","Instance","PlaySound","SFX_UI_Win_Open","classInstance","getClassByName","contains","info","get","getScene","addChild","prefab","loadPrefab","getComponent","Close","removeChild","destroy"],"mappings":"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","sourcesContent":["import { HashMap } from \"../../Utils/HashMap\";\r\nimport { Node, instantiate, js, director } from \"cc\";\r\nimport { SoundManager } from \"../../../Sound/SoundManager\";\r\nimport { SoundDefine } from \"../../../Sound/SoundDefine\";\r\nimport { LoadResUtil } from \"../../Utils/LoadResUtil\";\r\nimport { UISystemConfig } from \"../UISystemConfig\";\r\nexport class UIElement\r\n{    \r\n    public Resource:string = null as unknown as string;\r\n    public Cache:boolean = null as unknown as boolean;\r\n    public Instance:Node = null as unknown as Node;\r\n\r\n    constructor(resource:string,cache:boolean){\r\n        this.Resource=resource;        \r\n        this.Cache=cache;\r\n    }\r\n\r\n}\r\nexport class UIManager{\r\n\r\n    public static Instance:UIManager=new UIManager();\r\n\r\n    public UIResource = new HashMap();\r\n    public Init(){\r\n        this.UIResource.put(\"UISystemConfig\", new UIElement(\"UI/UISystemConfig\",false));\r\n        this.UIResource.put(\"UICharacterDetail\", new UIElement(\"UI/UICharacterDetail\",false));\r\n        this.UIResource.put(\"UIPromote\", new UIElement(\"UI/UIPromote\",false));\r\n        this.UIResource.put(\"UIBag\", new UIElement(\"UI/UIBag\",false));\r\n        this.UIResource.put(\"UIShop\", new UIElement(\"UI/UIShop\",false));\r\n        this.UIResource.put(\"UIPowerRanking\", new UIElement(\"UI/UIPowerRanking\",false));\r\n        this.UIResource.put(\"UITran\", new UIElement(\"UI/UITran\",false));\r\n        this.UIResource.put(\"UIAuction\", new UIElement(\"UI/UIAuction\",false));\r\n        this.UIResource.put(\"UIInvite\", new UIElement(\"UI/UIInvite\",false));\r\n        this.UIResource.put(\"UIFollow\", new UIElement(\"UI/UIFollow\",false));\r\n        this.UIResource.put(\"UIChat\", new UIElement(\"UI/UIChat\",false));\r\n        this.UIResource.put(\"UIMatchWait\", new UIElement(\"UI/UIMatchWait\",false));\r\n        \r\n    }\r\n\r\n     /// <summary>\r\n    /// Show UI\r\n    /// </summary>\r\n    public async show(UIName:string):any\r\n    {\r\n        SoundManager.Instance.PlaySound(SoundDefine.SFX_UI_Win_Open);\r\n        let classInstance=js.getClassByName(UIName);\r\n\r\n        if (this.UIResource.contains(UIName))\r\n        {\r\n            let info = this.UIResource.get(UIName);\r\n            if (info.Instance)\r\n            {\r\n                director.getScene()?.addChild(info.Instance);\r\n            }\r\n            else\r\n            {\r\n                let prefab= await LoadResUtil.loadPrefab(info.Resource);               \r\n                if (!prefab)\r\n                {\r\n                    return classInstance; \r\n                }else{\r\n                   info.Instance = instantiate(prefab);\r\n                   director.getScene()?.addChild(info.Instance);\r\n                }\r\n            }\r\n            \r\n            return info.Instance.getComponent(UIName);\r\n        }\r\n        return classInstance;\r\n    }\r\n\r\n    public Close(UIName:string):void\r\n    {\r\n        //SoundManager.Instance.PlaySound(\"ui_close\");\r\n        if (this.UIResource.contains(UIName))\r\n        {\r\n            let info = this.UIResource.get(UIName);\r\n            if (info.Cache)\r\n            {\r\n                director.getScene()?.removeChild(info.Instance);\r\n            }\r\n            else\r\n            {\r\n                \r\n                info.Instance.destroy();\r\n                info.Instance = null;\r\n            }\r\n        }\r\n    }\r\n\r\n}"]}