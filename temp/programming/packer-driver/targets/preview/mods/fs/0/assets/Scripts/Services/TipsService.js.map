{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/Services/TipsService.ts"],"names":["TipsService","director","LogUtil","proto","MessageBox","MessageBoxType","EventManager","EventType","TipsManager","NetMessage","NetMessageRequest","Result","OfferPriceRequest","OfferPriceResponse","AuctionRequest","AuctionResponse","GetAuctionListRequest","GetAuctionListResponse","TipsResponse","TipsType","TipsWorkType","Init","Instance","addListener","OnTips","param","response","log","content","tipsType","Tips","showTips","Popup","Show","Information","tipsWorkType","console","OutRoom","AuctionResult","dispatch","AuctionRefreshUI","DismissRoom","loadScene","KickOutRoom","OnMyRoom_RefieshUI"],"mappings":";;;0HAeaA,W;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAPJC,MAAAA,Q,OAAAA,Q;;AARAC,MAAAA,O,iBAAAA,O;;AACFC,MAAAA,K;;AAEEC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,c,iBAAAA,c;;AACZC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;AAMAC,MAAAA,W,iBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,UAAF;AAAcC,QAAAA,iBAAd;AAAkCC,QAAAA,MAAlC;AAA0CC,QAAAA,iBAA1C;AAA6DC,QAAAA,kBAA7D;AAAiFC,QAAAA,cAAjF;AACFC,QAAAA,eADE;AACeC,QAAAA,qBADf;AACsCC,QAAAA,sBADtC;AAC8DC,QAAAA,YAD9D;AAC4EC,QAAAA,QAD5E;AACsFC,QAAAA;AADtF,O;;;;6BAGOpB,W,GAAN,MAAMA,WAAN,CAAiB;AAGdqB,QAAAA,IAAI,GAAG;AACX;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,WAAtB,CAAkC;AAAA;AAAA,sCAAUC,MAA5C,EAAoD,KAAKA,MAAzD,EAAiE,IAAjE;AACF;AAEA;AACJ;AACA;;;AACYA,QAAAA,MAAM,CAACC,KAAD,EAAmB;AAC7B,cAAIC,QAAQ,GAAGD,KAAK,CAAC,CAAD,CAApB;AACA;AAAA;AAAA,kCAAQE,GAAR,CAAY,kBAAZ,EAAgCD,QAAQ,CAACE,OAAzC,EAAkDF,QAAQ,CAACG,QAA3D;;AACA,cAAGH,QAAQ,CAACG,QAAT,IAAqBV,QAAQ,CAACW,IAAjC,EAAsC;AAAI;AACtC;AAAA;AAAA,4CAAYR,QAAZ,CAAqBS,QAArB,CAA8BL,QAAQ,CAACE,OAAvC;AACH,WAFD,MAEM,IAAGF,QAAQ,CAACG,QAAT,IAAqBV,QAAQ,CAACa,KAAjC,EAAuC;AAAG;AAC5C;AAAA;AAAA,0CAAWC,IAAX,CAAgBP,QAAQ,CAACE,OAAzB,EAAkC,IAAlC,EAAwC;AAAA;AAAA,kDAAeM,WAAvD;AACH,WAP4B,CAS7B;;;AACA,cAAG,CAACR,QAAQ,CAACS,YAAb,EAA0B;AACtB;AACH;;AACDC,UAAAA,OAAO,CAACT,GAAR,CAAY,gBAAcD,QAAQ,CAACS,YAAT,IAAyBf,YAAY,CAACiB,OAApD,CAAZ;;AACA,cAAGX,QAAQ,CAACS,YAAT,IAAyBf,YAAY,CAACkB,aAAzC,EAAuD;AAAG;AACtD;AAAA;AAAA,8CAAahB,QAAb,CAAsBiB,QAAtB,CAA+B;AAAA;AAAA,wCAAUC,gBAAzC;AACH,WAFD,MAEM,IAAGd,QAAQ,CAACS,YAAT,IAAyBf,YAAY,CAACqB,WAAzC,EAAqD;AAAG;AAC1DxC,YAAAA,QAAQ,CAACyC,SAAT,CAAmB,QAAnB;AACH,WAFK,MAEA,IAAGhB,QAAQ,CAACS,YAAT,IAAyBf,YAAY,CAACuB,WAAzC,EAAqD;AAAG;AAC1D1C,YAAAA,QAAQ,CAACyC,SAAT,CAAmB,QAAnB;AACH,WAFK,MAEA,IAAGhB,QAAQ,CAACS,YAAT,IAAyBf,YAAY,CAACiB,OAAzC,EAAiD;AAAG;AAEtD;AAAA;AAAA,8CAAaf,QAAb,CAAsBiB,QAAtB,CAA+B;AAAA;AAAA,wCAAUK,kBAAzC;AACH;AACJ;;AAlCmB,O;;sBAAX5C,W,cAC4B,IAAIA,WAAJ,E","sourcesContent":["import { LogUtil } from \"../Log/LogUtil\";\r\nimport proto from '../../Proto/proto.js';\r\nimport { NetClient } from \"../Network/NetClient\";\r\nimport { MessageBox, MessageBoxType } from \"../UI/Common/MessageBox\";\r\nimport { EventManager } from \"../UI/Common/Event/EventManager\";\r\nimport { EventType } from \"../UI/Common/Event/EventType\";\r\nimport { SocketConst } from \"../Network/SocketConst\";\r\nimport { User } from \"../Models/User\";\r\nimport { director } from \"cc\";\r\nimport { SoundManager } from \"../../Sound/SoundManager\";\r\nimport { SoundDefine } from \"../../Sound/SoundDefine\";\r\nimport { TipsManager } from \"../UI/TipsManager\";\r\nconst { NetMessage, NetMessageRequest,  Result, OfferPriceRequest, OfferPriceResponse, AuctionRequest, \r\n    AuctionResponse, GetAuctionListRequest, GetAuctionListResponse, TipsResponse, TipsType, TipsWorkType} = proto;\r\n\r\nexport class TipsService{\r\n   public static Instance: TipsService = new TipsService();\r\n\r\n   public Init() {\r\n      EventManager.Instance.addListener(EventType.OnTips, this.OnTips, this)\r\n   }\r\n\r\n    /**\r\n     * 提示响应\r\n     */\r\n    private OnTips(param: any): void {\r\n        let response = param[0] as TipsResponse;\r\n        LogUtil.log(\"OnTips:{0} [{1}]\", response.content, response.tipsType);\r\n        if(response.tipsType == TipsType.Tips){   //字体提示\r\n            TipsManager.Instance.showTips(response.content);\r\n        }else if(response.tipsType == TipsType.Popup){  //弹窗提示\r\n            MessageBox.Show(response.content, \"提示\", MessageBoxType.Information);\r\n        }\r\n\r\n        //业务消息\r\n        if(!response.tipsWorkType){\r\n            return;\r\n        }\r\n        console.log('isOutRoom：'+(response.tipsWorkType == TipsWorkType.OutRoom))\r\n        if(response.tipsWorkType == TipsWorkType.AuctionResult){  //拍卖结算\r\n            EventManager.Instance.dispatch(EventType.AuctionRefreshUI);\r\n        }else if(response.tipsWorkType == TipsWorkType.DismissRoom){  //解散房间\r\n            director.loadScene('UIMain');\r\n        }else if(response.tipsWorkType == TipsWorkType.KickOutRoom){  //踢出房间\r\n            director.loadScene('UIMain');\r\n        }else if(response.tipsWorkType == TipsWorkType.OutRoom){  //退出房间\r\n\r\n            EventManager.Instance.dispatch(EventType.OnMyRoom_RefieshUI); \r\n        }\r\n    }\r\n\r\n    \r\n}"]}