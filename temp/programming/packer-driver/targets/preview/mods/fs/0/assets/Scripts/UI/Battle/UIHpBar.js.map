{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Battle/UIHpBar.ts"],"names":["_decorator","Component","Sprite","Label","Color","BattleManager","CreatureType","ccclass","property","UIHpBar","start","SetItemInfo","level","nickName","currentHp","maxHp","isCharacter","type","nameLabel","string","hpLabel","hpSprite","fillRange","tempColor","fromHEX","color","update","owner","currentCharacter","Instance","creatureType","Character","user","id","teamType2","character","nickname","attributes","HP","hp","Monster","undefined","characterDefine"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Sprite, Label, Color } from 'cc';\r\nimport { Creature } from './Enities/Creature';\r\nimport { User } from '../../Models/User';\r\nimport { TeamType2 } from './enums/TeamType2';\r\nimport { BattleManager } from './Managers/BattleManager';\r\nimport { CreatureType } from './enums/CreatureType';\r\nconst { ccclass, property } = _decorator;\r\n/**\r\n * 血量条\r\n */\r\n@ccclass('UIHpBar')\r\nexport class UIHpBar extends Component {\r\n   \r\n    @property(Sprite)\r\n    public hpSprite:Sprite=null;\r\n    @property(Label)\r\n    public hpLabel:Label=null;\r\n    @property(Label)\r\n    public nameLabel:Label=null;\r\n\r\n    public owner:Creature=null;\r\n\r\n    start () {\r\n        \r\n    }\r\n\r\n    private tempColor = new Color();\r\n    /**\r\n     * 设置血条信息\r\n     * @param level 等级 \r\n     * @param nickName  昵称\r\n     * @param currentHp 当前hp\r\n     * @param maxHp  最大hp\r\n     * @param isCharacter 是否是角色\r\n     * @param type 类型 1、自己  2、队友  3、敌队\r\n     */\r\n    private SetItemInfo(level:string, nickName:string, currentHp:number, maxHp:number, isCharacter:boolean, type:number){\r\n        if(isCharacter){\r\n           this.nameLabel.string='Lv'+level+'.'+nickName;\r\n        }else{\r\n           this.nameLabel.string='';\r\n        }\r\n        this.hpLabel.string=currentHp+'/'+maxHp;\r\n        this.hpSprite.fillRange=currentHp/maxHp;\r\n        // this.hpSprite.color.fromHEX(type==1?'#00FF00':(type==2?'#0085FF':'#FF0000'));\r\n        this.tempColor.fromHEX(type==1?'#00FF00':(type==2?'#0085FF':'#FF0000'));\r\n        this.hpSprite.color = this.tempColor;\r\n    }\r\n\r\n    update(){\r\n        if(this.owner){\r\n            let currentCharacter = BattleManager.Instance.currentCharacter;\r\n            if(currentCharacter && this.owner.creatureType==CreatureType.Character){  //角色\r\n                let user = this.owner.user;\r\n                let type = user.id==currentCharacter.user.id ? 1:(this.owner.teamType2 == currentCharacter.teamType2 ? 2 : 3);\r\n                this.SetItemInfo(user.character.level, user.nickname, this.owner.attributes.HP, user.character.hp, true, type);\r\n            }else if(this.owner.creatureType==CreatureType.Monster){  //怪物\r\n                let type = this.owner.teamType2==currentCharacter.teamType2 ? 2 : 3;\r\n                this.SetItemInfo(undefined, undefined, this.owner.attributes.HP, this.owner.characterDefine.HP, false, type);\r\n            }\r\n        }\r\n    }\r\n \r\n}\r\n\r\n"]}