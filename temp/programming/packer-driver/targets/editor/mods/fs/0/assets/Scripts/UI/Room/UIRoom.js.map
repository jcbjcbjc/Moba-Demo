{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Room/UIRoom.ts"],"names":["_decorator","Component","Node","director","Label","Sprite","Button","SystemEventType","EventManager","EventType","proto","RoomService","LoadResUtil","DataManager","UIManager","MessageBox","MessageBoxType","User","ChatManager","ccclass","property","NRoom","RoomUser","TeamType","ChatChannel","UIRoom","start","RefieshUI","Instance","addListener","OnMyRoom_UI","OnMyRoom_RefieshUI","OnChangeRedNum","normalBgSpriteFrame","mySprite1","spriteFrame","SelectedChannel","RoomChat","chatRedSprite","node","active","SendMyRoom","param","myNicknameLabel1","myNicknameLabel2","myNicknameLabel3","enemyNicknameLabel1","enemyNicknameLabel2","enemyNicknameLabel3","mykickOutButton2","mykickOutButton3","enemykickOutButton1","enemykickOutButton2","enemykickOutButton3","room","roomOwnerFlag","userId","user","id","myInviteButton","enemyInviteButton","startGameButton","myList","my","enemyList","enemy","roomIdLabel","string","roomId","this_","i","teamNum","length","load_local_sprite","characters","cCharacterId","Avatar","nickName","console","log","on","TOUCH_END","OnRoomUserClcik","off","roomUser","currentTarget","uiCharacterDetail","show","SendCharacterDetail","OnMyInviteClick","uiInvite","inviteTeamType","My","OnEnemyInviteClick","Enemy","OnStartGameClick","SendRoomStartGame","OnClickChat","uiChat","ChangeChatChannel","OnBackClick","tips","confirmObj","Show","Confirm","UIMessageBox_OnClickYes","SendOutRoom","loadScene","arr","GetChannelChatRedNum","OnkickOut","customEventData","SendKickOut","onDestroy","removeAll"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, director, Label, Sprite, SpriteFrame, Button, SystemEventType } from 'cc';\r\nimport { EventManager } from '../Common/Event/EventManager';\r\nimport { EventType } from '../Common/Event/EventType';\r\nimport proto from '../../../Proto/proto.js';\r\nimport { RoomService } from '../../Services/RoomService';\r\nimport { LoadResUtil } from '../../Utils/LoadResUtil';\r\nimport { DataManager } from '../../Managers/DataManager';\r\nimport { UIInvite } from './UIInvite';\r\nimport { UIManager } from '../Common/UIManager';\r\nimport { MessageBox, MessageBoxType } from \"../Common/MessageBox\";\r\nimport { User } from '../../Models/User';\r\nimport { UICharacterDetail } from '../UICharacterDetail/UICharacterDetail';\r\nimport { UIChat } from '../Chat/UIChat';\r\nimport { ChatManager } from '../../Managers/ChatManager';\r\nimport { UserService } from '../../Services/UserService';\r\nconst { ccclass, property } = _decorator;\r\nconst { NRoom, RoomUser, TeamType, ChatChannel } = proto;\r\n\r\n@ccclass('UIRoom')\r\nexport class UIRoom extends Component {\r\n\r\n  @property(Sprite)\r\n  public mySprite1 = null as unknown as Sprite;\r\n  @property(Label)\r\n  public myNicknameLabel1 = null as unknown as Label;\r\n  @property(Sprite)\r\n  public mySprite2 = null as unknown as Sprite;\r\n  @property(Label)\r\n  public myNicknameLabel2 = null as unknown as Label;\r\n  @property(Sprite)\r\n  public mySprite3 = null as unknown as Sprite;\r\n  @property(Label)\r\n  public myNicknameLabel3 = null as unknown as Label;\r\n\r\n  @property(Sprite)\r\n  public enemySprite1 = null as unknown as Sprite;\r\n  @property(Label)\r\n  public enemyNicknameLabel1 = null as unknown as Label;\r\n  @property(Sprite)\r\n  public enemySprite2 = null as unknown as Sprite;\r\n  @property(Label)\r\n  public enemyNicknameLabel2 = null as unknown as Label;\r\n  @property(Sprite)\r\n  public enemySprite3 = null as unknown as Sprite;\r\n  @property(Label)\r\n  public enemyNicknameLabel3 = null as unknown as Label;\r\n\r\n  @property(Label)\r\n  public roomIdLabel = null as unknown as Label;\r\n  @property(Button)\r\n  public myInviteButton = null as unknown as Button;\r\n  @property(Button)\r\n  public enemyInviteButton = null as unknown as Button;\r\n  @property(Button)\r\n  public startGameButton = null as unknown as Button;\r\n  // @property(Label)\r\n  // public chatLabel=null as unknown as Label;\r\n  @property(Sprite)\r\n  public chatRedSprite: Sprite = null as unknown as Sprite;\r\n\r\n  @property(Node)\r\n  public mykickOutButton2 = null as unknown as Node;\r\n  @property(Node)\r\n  public mykickOutButton3 = null as unknown as Node;\r\n\r\n  @property(Node)\r\n  public enemykickOutButton1 = null as unknown as Node;\r\n  @property(Node)\r\n  public enemykickOutButton2 = null as unknown as Node;\r\n  @property(Node)\r\n  public enemykickOutButton3 = null as unknown as Node;\r\n\r\n  private room = null as unknown as NRoom;\r\n  public normalBgSpriteFrame = null as unknown as SpriteFrame;\r\n  private teamNum: number = 3;  //队伍人数\r\n  public static inviteTeamType = null as unknown as TeamType;   //邀请队伍类型\r\n\r\n  start() {\r\n    this.RefieshUI();\r\n    EventManager.Instance.addListener(EventType.OnMyRoom_UI, this.OnMyRoom_UI, this);\r\n    EventManager.Instance.addListener(EventType.OnMyRoom_RefieshUI, this.RefieshUI, this);\r\n    EventManager.Instance.addListener(EventType.OnChangeRedNum, this.OnChangeRedNum, this);\r\n    this.normalBgSpriteFrame = this.mySprite1.spriteFrame as SpriteFrame;\r\n    ChatManager.Instance.SelectedChannel(ChatChannel.RoomChat);  //切换频道\r\n    this.chatRedSprite.node.active = false;\r\n    this.OnChangeRedNum();\r\n  }\r\n\r\n  public RefieshUI() {\r\n    RoomService.Instance.SendMyRoom();\r\n  }\r\n\r\n\r\n  async OnMyRoom_UI(param: any) {\r\n    this.myNicknameLabel1.node.active = false;\r\n    this.myNicknameLabel2.node.active = false;\r\n    this.myNicknameLabel3.node.active = false;\r\n    this.enemyNicknameLabel1.node.active = false;\r\n    this.enemyNicknameLabel2.node.active = false;\r\n    this.enemyNicknameLabel3.node.active = false;\r\n\r\n    this.mykickOutButton2.active = false;\r\n    this.mykickOutButton3.active = false;\r\n    this.enemykickOutButton1.active = false;\r\n    this.enemykickOutButton2.active = false;\r\n    this.enemykickOutButton3.active = false;\r\n\r\n    let room = param[0] as NRoom;\r\n    this.room = room;\r\n    let roomOwnerFlag = room.userId == User.Instance.user.id;\r\n    this.myInviteButton.node.active = roomOwnerFlag;\r\n    this.enemyInviteButton.node.active = roomOwnerFlag;\r\n    this.startGameButton.node.active = roomOwnerFlag;\r\n\r\n    let myList = room.my as unknown as Array<RoomUser>;\r\n    let enemyList = room.enemy as unknown as Array<RoomUser>;\r\n    this.roomIdLabel.string = '房间id：' + room.roomId;\r\n    let this_ = this;\r\n    for (let i = 0; i < this.teamNum; i++) {\r\n      if (i < myList.length) {\r\n        let my = myList[i];\r\n        this['mySprite' + (i + 1)].spriteFrame = await LoadResUtil.load_local_sprite(DataManager.Instance.characters[my.cCharacterId].Avatar + '/spriteFrame');\r\n        this['myNicknameLabel' + (i + 1)].string = my.nickName;\r\n        this['myNicknameLabel' + (i + 1)].node.active = true;\r\n        if (i > 0 && roomOwnerFlag) {\r\n          console.log('mykickOutButton' + (i + 1))\r\n          this['mykickOutButton' + (i + 1)]['roomUser'] = my;\r\n          this['mykickOutButton' + (i + 1)].active = true;\r\n        }\r\n\r\n        //头像点击\r\n        this['mySprite' + (i + 1)].node['roomUser'] = my;\r\n        this['mySprite' + (i + 1)].node.on(SystemEventType.TOUCH_END, this.OnRoomUserClcik, this);\r\n      } else {\r\n        this['mySprite' + (i + 1)].spriteFrame = this.normalBgSpriteFrame;\r\n        this['mySprite' + (i + 1)].node.off(SystemEventType.TOUCH_END, this.OnRoomUserClcik, this);\r\n      }\r\n    }\r\n    for (let i = 0; i < this.teamNum; i++) {\r\n      if (i < enemyList.length) {\r\n        let enemy = enemyList[i];\r\n        this['enemySprite' + (i + 1)].spriteFrame = await LoadResUtil.load_local_sprite(DataManager.Instance.characters[enemy.cCharacterId].Avatar + '/spriteFrame');\r\n        this['enemyNicknameLabel' + (i + 1)].string = enemy.nickName;\r\n        this['enemyNicknameLabel' + (i + 1)].node.active = true;\r\n        if (roomOwnerFlag) {\r\n          console.log('enemykickOutButton' + (i + 1))\r\n          this['enemykickOutButton' + (i + 1)]['roomUser'] = enemy;\r\n          this['enemykickOutButton' + (i + 1)].active = true;\r\n        }\r\n        //头像点击\r\n        this['enemySprite' + (i + 1)].node['roomUser'] = enemy;\r\n        this['enemySprite' + (i + 1)].node.on(SystemEventType.TOUCH_END, this.OnRoomUserClcik, this);\r\n      } else {\r\n        this['enemySprite' + (i + 1)].spriteFrame = this.normalBgSpriteFrame;\r\n        this['enemySprite' + (i + 1)].node.off(SystemEventType.TOUCH_END, this.OnRoomUserClcik, this);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 房间用户点击\r\n   */\r\n  public async OnRoomUserClcik(param: any) {\r\n    console.log(param)\r\n    let roomUser = param.currentTarget.roomUser;\r\n    let uiCharacterDetail = await UIManager.Instance.show(\"UICharacterDetail\") as UICharacterDetail;\r\n    uiCharacterDetail.SendCharacterDetail(roomUser.userId, 0, 2);\r\n  }\r\n\r\n  /**\r\n   * 我方邀请点击\r\n   */\r\n  async OnMyInviteClick() {\r\n    let uiInvite = await UIManager.Instance.show(\"UIInvite\") as UIInvite;\r\n    UIRoom.inviteTeamType = TeamType.My;\r\n  }\r\n\r\n  /**\r\n   * 敌方邀请点击\r\n   */\r\n  async OnEnemyInviteClick() {\r\n    let uiInvite = await UIManager.Instance.show(\"UIInvite\") as UIInvite;\r\n    UIRoom.inviteTeamType = TeamType.Enemy;\r\n  }\r\n\r\n  /**\r\n   * 开始游戏点击\r\n   */\r\n  OnStartGameClick() {\r\n    RoomService.Instance.SendRoomStartGame();\r\n  }\r\n\r\n  /**\r\n   * 点击聊天\r\n   */\r\n  public async OnClickChat() {\r\n    let uiChat = await UIManager.Instance.show(\"UIChat\") as UIChat;\r\n    uiChat.ChangeChatChannel(2);\r\n  }\r\n\r\n\r\n  /**\r\n    * 返回点击\r\n    */\r\n  async OnBackClick() {\r\n    let roomOwnerFlag: boolean = this.room.userId == User.Instance.user.id;\r\n    let tips = roomOwnerFlag ? '解散房间' : '退出房间';\r\n    let confirmObj = await MessageBox.Show(\"确定要\" + tips + \"吗？\", tips, MessageBoxType.Confirm, \"确定\", \"取消\");\r\n    let this_ = this;\r\n    EventManager.Instance.addListener(EventType.UIMessageBox_OnClickYes, function () {\r\n      RoomService.Instance.SendOutRoom();\r\n      director.loadScene('UIMain');\r\n    }, confirmObj);\r\n  }\r\n\r\n  /**\r\n   * 消息数量改变\r\n   */\r\n  private OnChangeRedNum() {\r\n    let arr = ChatManager.Instance.GetChannelChatRedNum(2);\r\n    console.log('OnChangeRedNum arr=' + arr)\r\n    // this.chatLabel.string=(arr[1] > 99 ? '99+' : arr[1])+'';\r\n    if (arr[1] > 0) {\r\n      this.chatRedSprite.node.active = true;\r\n    } else {\r\n      this.chatRedSprite.node.active = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n  * 踢人\r\n  */\r\n  public async OnkickOut(param: any, customEventData: any) {\r\n    console.log(customEventData)\r\n    let roomUser = param.currentTarget.roomUser;\r\n    let confirmObj = await MessageBox.Show(\"确定要踢出\" + roomUser.nickName + \"吗？\", \"踢人\", MessageBoxType.Confirm, \"确定\", \"取消\");\r\n    let this_ = this;\r\n    EventManager.Instance.addListener(EventType.UIMessageBox_OnClickYes, function () {\r\n      RoomService.Instance.SendKickOut(roomUser.userId);\r\n    }, confirmObj);\r\n\r\n  }\r\n\r\n  onDestroy() {\r\n    console.log('onDestroy')\r\n    EventManager.Instance.removeAll(this);\r\n  }\r\n}\r\n\r\n"]}