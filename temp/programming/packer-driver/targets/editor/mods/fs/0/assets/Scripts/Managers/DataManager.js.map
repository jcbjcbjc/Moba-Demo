{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/Managers/DataManager.ts"],"names":["DataManager","LoadResUtil","RockerSpeedVo","Array","Load","console","log","characters","JSON","parse","loadConfig","DataPath","items","shops","shopItems","gameConfig","addAttrs","skills","spawnRules","buffs","rockerSpeeds","rockerSpeedStr","rockerSpeedArr","split","i","length","str","arr","rockerSpeedVo","Number","push"],"mappings":"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","sourcesContent":["import { LoadResUtil } from \"../Utils/LoadResUtil\";\r\nimport { CharacterDefine } from \"../Data/CharacterDefine\";\r\nimport { ItemDefine } from \"../Data/ItemDefine\";\r\nimport { ShopDefine } from \"../Data/ShopDefine\";\r\nimport { ShopItemDefine } from \"../Data/ShopItemDefine\";\r\nimport { GameConfig } from \"../Data/GameConfig\";\r\nimport { AddAttrDefine } from \"../Data/AddAttrDefine\";\r\nimport { RockerSpeedVo } from \"../Vo/RockerSpeedVo\";\r\nimport { SkillDefine } from \"../Data/SkillDefine\";\r\nimport { SpawnRuleDefine } from \"../Data/SpawnRuleDefine\";\r\nimport { BuffDefine } from \"../Data/BuffDefine\";\r\n\r\nexport class DataManager {\r\n\r\n   public static Instance:DataManager=new DataManager();\r\n\r\n    private DataPath:string='Data/';\r\n    public characters: { [key: number]: CharacterDefine; }=null as unknown as { [key: number]: CharacterDefine; }; \r\n    public items: { [key: number]: ItemDefine; }=null as unknown as { [key: number]: ItemDefine; }; \r\n    public shops: { [key: number]: ShopDefine; }=null as unknown as { [key: number]: ShopDefine; }; \r\n    public shopItems: { [key: number]: { [key: number]: ShopItemDefine; }; }=null as unknown as { [key: number]: { [key: number]: ShopItemDefine; }; }; \r\n    public gameConfig:GameConfig=null as unknown as GameConfig;\r\n    public addAttrs: { [key: number]: AddAttrDefine; }=null as unknown as { [key: number]: AddAttrDefine; };  \r\n    // public rockerSpeeds: { [key: number]: RockerSpeedVo; }={}; \r\n    public rockerSpeeds = new Array<RockerSpeedVo>();\r\n    public skills: { [key: number]: { [key: number]: SkillDefine; }; }=null; \r\n    public spawnRules: { [key: number]: SpawnRuleDefine; }=null;\r\n    public buffs: { [key: number]: BuffDefine; }=null;\r\n    \r\n\r\n  public async Load(){\r\n      console.log('Load json')\r\n     this.characters = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"CharacterDefine.txt\"));\r\n     this.items = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"ItemDefine.txt\"));\r\n     this.shops = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"ShopDefine.txt\"));\r\n     this.shopItems = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"ShopItemDefine.txt\"));\r\n     this.gameConfig = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"GameConfig.txt\"));\r\n     this.addAttrs = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"AddAttrDefine.txt\"));\r\n     this.skills = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"SkillDefine.txt\"));\r\n     this.spawnRules = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"SpawnRuleDefine.txt\"));\r\n     this.buffs = JSON.parse(await LoadResUtil.loadConfig(this.DataPath+\"BuffDefine.txt\"));\r\n     \r\n     //解析摇杆数据\r\n    //  this.rockerSpeeds={};\r\n    // let rockerSpeedStr= await LoadResUtil.loadConfig(this.DataPath+\"RockerSpeed.txt\");\r\n    // let rockerSpeedArr=rockerSpeedStr.split('\\n');\r\n    // for(let i=0;i<rockerSpeedArr.length;i++){\r\n    //   let str=rockerSpeedArr[i];\r\n    //   if(!str){\r\n    //     continue;\r\n    //   }\r\n    //    let arr = str.split(',');\r\n    //    let rockerSpeedVo = new RockerSpeedVo(Number(arr[1]), Number(arr[2]));\r\n    //    this.rockerSpeeds[arr[0]] = rockerSpeedVo;\r\n    // }\r\n    this.rockerSpeeds = [];\r\n    let rockerSpeedStr= await LoadResUtil.loadConfig(this.DataPath+\"RockerSpeed.txt\");\r\n    let rockerSpeedArr=rockerSpeedStr.split('\\n');\r\n    for(let i=0;i<rockerSpeedArr.length;i++){\r\n      let str=rockerSpeedArr[i];\r\n      if(!str){\r\n        continue;\r\n      }\r\n       let arr = str.split(',');\r\n       let rockerSpeedVo = new RockerSpeedVo(Number(arr[1]), Number(arr[2]));\r\n       this.rockerSpeeds.push(rockerSpeedVo);\r\n    }\r\n  }\r\n}"]}