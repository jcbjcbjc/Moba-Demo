{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/UISystemConfig.ts"],"names":["_decorator","Node","Slider","Sprite","ProgressBar","UIWindow","SoundManager","SoundDefine","SoundConfig","ccclass","property","UISystemConfig","start","musicOn","node","active","MusicOn","musicOff","soundOn","SoundOn","soundOff","sliderMusic","progress","musicProgressBar","MusicVolume","sliderSound","soundProgressBar","SoundVolume","this_","on","event","PlaySound","EventType","TOUCH_END","console","log","type","MusicToogle","SoundToogle","Instance","SFX_UI_Click","time","Date","getTime","lastPlay"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Slider, Sprite, ProgressBar, SystemEvent } from 'cc';\r\nimport { UIWindow } from './Common/UIWindow';\r\nimport { EventType } from './Common/Event/EventType';\r\nimport { SoundManager } from '../../Sound/SoundManager';\r\nimport { SoundDefine } from '../../Sound/SoundDefine';\r\nimport { SoundConfig } from '../../Sound/SoundConfig';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('UISystemConfig')\r\nexport class UISystemConfig extends UIWindow {\r\n\r\n    @property(Slider)\r\n    public sliderMusic:Slider=null as unknown as Slider;\r\n    @property(Slider)\r\n    public sliderSound:Slider=null as unknown as Slider;\r\n\r\n    @property(ProgressBar)\r\n    public musicProgressBar:ProgressBar=null as unknown as ProgressBar;\r\n    @property(ProgressBar)\r\n    public soundProgressBar:ProgressBar=null as unknown as ProgressBar;\r\n\r\n    @property(Sprite)\r\n    public musicOff:Sprite=null as unknown as Sprite;\r\n    @property(Sprite)\r\n    public soundOff:Sprite=null as unknown as Sprite;\r\n\r\n    @property(Sprite)\r\n    public musicOn:Sprite=null as unknown as Sprite;\r\n    @property(Sprite)\r\n    public soundOn:Sprite=null as unknown as Sprite;\r\n\r\n    start () {\r\n        this.musicOn.node.active=SoundConfig.MusicOn;\r\n        this.musicOff.node.active=!SoundConfig.MusicOn;\r\n        this.soundOn.node.active=SoundConfig.SoundOn;\r\n        this.soundOff.node.active=!SoundConfig.SoundOn;\r\n\r\n\r\n        this.sliderMusic.progress =this.musicProgressBar.progress= SoundConfig.MusicVolume;\r\n        this.sliderSound.progress =this.soundProgressBar.progress= SoundConfig.SoundVolume;\r\n\r\n        let this_ = this;\r\n        //音乐滑动事件\r\n        this.sliderMusic.node.on('slide', function(event){\r\n            this_.musicProgressBar.progress = this_.sliderMusic.progress;\r\n            SoundConfig.MusicVolume=this_.sliderMusic.progress;\r\n            this_.PlaySound();\r\n        }, this);\r\n        //声音滑动事件\r\n        this.sliderSound.node.on('slide', function(event){\r\n            this_.soundProgressBar.progress = this_.sliderSound.progress;\r\n            SoundConfig.SoundVolume=this_.sliderSound.progress;\r\n            this_.PlaySound();\r\n        }, this);\r\n        \r\n        //关音乐点击事件\r\n        this.musicOff.node.on(Node.EventType.TOUCH_END, function (event) {\r\n            console.log(\"TOUCH_END this.musicOff\", event.type);\r\n            this_.MusicToogle(false);\r\n        },this);\r\n\r\n        //关声音点击事件\r\n        this.soundOff.node.on(Node.EventType.TOUCH_END, function (event) {\r\n            // console.log(\"TOUCH_END this.soundOff\", event.type);\r\n            this_.SoundToogle(false);\r\n        },this);\r\n\r\n        //开音乐点击事件\r\n        this.musicOn.node.on(Node.EventType.TOUCH_END, function (event) {\r\n            console.log(\"TOUCH_END this.musicOn\", event.type);\r\n            this_.MusicToogle(true);\r\n\r\n        },this);\r\n\r\n        //开声音点击事件\r\n        this.soundOn.node.on(Node.EventType.TOUCH_END, function (event) {\r\n            // console.log(\"TOUCH_END this.soundOn\", event.type);\r\n            this_.SoundToogle(true);\r\n        },this);\r\n    }\r\n\r\n    public MusicToogle(on:boolean) {\r\n        this.musicOn.node.active=!on;        \r\n        this.musicOff.node.active = on;\r\n        SoundConfig.MusicOn = !on;\r\n        SoundManager.Instance.PlaySound(SoundDefine.SFX_UI_Click);\r\n    }\r\n\r\n    public SoundToogle(on:boolean) {\r\n        this.soundOn.node.active = !on;\r\n        this.soundOff.node.active = on;\r\n        SoundConfig.SoundOn = !on;\r\n        SoundManager.Instance.PlaySound(SoundDefine.SFX_UI_Click);\r\n    } \r\n\r\n    private lastPlay = 0;\r\n    private PlaySound():void\r\n    {\r\n        let time=new Date().getTime();\r\n        if(time - this.lastPlay > 0.1)\r\n        {\r\n            this.lastPlay = time;\r\n            SoundManager.Instance.PlaySound(SoundDefine.SFX_UI_Click);\r\n            \r\n        }\r\n    }\r\n\r\n    // update (deltaTime: number) {\r\n    //     \r\n    // }\r\n}\r\n"]}