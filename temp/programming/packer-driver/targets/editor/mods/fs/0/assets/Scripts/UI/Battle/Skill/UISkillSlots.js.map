{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Battle/Skill/UISkillSlots.ts"],"names":["_decorator","Component","UISkillSlot","BattleManager","EventManager","EventType","ccclass","property","UISkillSlots","start","Instance","addListener","OnBattleGameIn","UpdateSkills","Skills","currentCharacter","SkillMgr","skill","currentUISkillSlot","uiSkillSlot","slots","type","Define","Type","toString","SetSkill","onDestroy","removeAll"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,UAGHC,QAAQ,CAAC;AAAA;AAAA,qCAAD,C,oCAHb,MACaC,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;;AAAA;AAAA;;AAK3C;AACAQ,QAAAA,KAAK,GAAI;AACF;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,WAAtB,CAAkC;AAAA;AAAA,sCAAUC,cAA5C,EAA2D,KAAKC,YAAhE,EAA6E,IAA7E;AACH,SARuC,CAU3C;;;AACOA,QAAAA,YAAY,GAAI;AAChB,cAAIC,MAAM,GAAG;AAAA;AAAA,8CAAcJ,QAAd,CAAuBK,gBAAvB,CAAwCC,QAAxC,CAAiDF,MAA9D,CADgB,CAEhB;;AACA,eAAI,IAAIG,KAAR,IAAiBH,MAAjB,EAAwB;AACpB,gBAAII,kBAA8B,GAAC,IAAnC;;AACA,iBAAI,IAAIC,WAAR,IAAuB,KAAKC,KAA5B,EAAkC;AAC9B;AACA,kBAAGD,WAAW,CAACE,IAAZ,IAAkBJ,KAAK,CAACK,MAAN,CAAaC,IAAb,CAAkBC,QAAlB,EAArB,EAAkD;AAAG;AACjDN,gBAAAA,kBAAkB,GAACC,WAAnB;AACA;AACH;AACJ;;AACD,gBAAGD,kBAAH,EAAsB;AAClBA,cAAAA,kBAAkB,CAACO,QAAnB,CAA4BR,KAA5B;AACH,aAXmB,CAYpB;;AACH;AACJ;;AAEDS,QAAAA,SAAS,GAAE;AACP;AAAA;AAAA,4CAAahB,QAAb,CAAsBiB,SAAtB,CAAgC,IAAhC;AACH;;AAhCuC,O;;;;;iBAGR,E","sourcesContent":["import { _decorator, Component, Node, Rect, Sprite, Vec3, Label } from 'cc';\r\nimport { UISkillSlot } from './UISkillSlot';\r\nimport { BattleManager } from '../Managers/BattleManager';\r\nimport { SkillType } from '../enums/SkillType';\r\nimport { EventManager } from '../../Common/Event/EventManager';\r\nimport { EventType } from '../../Common/Event/EventType';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('UISkillSlots')\r\nexport class UISkillSlots extends Component {\r\n\r\n    @property([UISkillSlot])\r\n    public slots:Array<UISkillSlot>=[];\r\n\r\n\t// Use this for initialization\r\n\tstart () {\r\n        EventManager.Instance.addListener(EventType.OnBattleGameIn,this.UpdateSkills,this);\r\n    }\r\n\t\r\n\t// Update is called once per frame\r\n\tpublic UpdateSkills () {\r\n        var Skills = BattleManager.Instance.currentCharacter.SkillMgr.Skills;\r\n        // let skillIdx:number = 0;\r\n        for(var skill of Skills){\r\n            let currentUISkillSlot:UISkillSlot=null;\r\n            for(var uiSkillSlot of this.slots){\r\n                // console.log(uiSkillSlot.type+'========'+skill.Define.Type.toString())\r\n                if(uiSkillSlot.type==skill.Define.Type.toString()){  //技能卡槽类型和技能类型一致\r\n                    currentUISkillSlot=uiSkillSlot;\r\n                    break;\r\n                }\r\n            }\r\n            if(currentUISkillSlot){\r\n                currentUISkillSlot.SetSkill(skill);\r\n            }\r\n            // skillIdx++;\r\n        } \r\n    }\r\n\r\n    onDestroy(){\r\n        EventManager.Instance.removeAll(this);\r\n    }\r\n}"]}