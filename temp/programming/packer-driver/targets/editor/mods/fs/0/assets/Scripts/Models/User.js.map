{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/Models/User.ts"],"names":["User","proto","EventManager","EventType","NUser","AttrPromoteType","NItem","NRoom","AddGold","coin","user","Instance","dispatch","UserCoinChange","UpdateAttrPromote","attrPromoteType","spot","attrValue","character","Att","attSpot","att","Def","defSpot","def","Hp","hpSpot","hp","Cri","criSpot","cri","Resu","resuSpot","resu","Speed","speedSpot","speed","Cd","cdSpot","cd"],"mappings":";;;8DAOaA,I;;;;;;;;;;;;;;;;;;;;;;;;AAPNC,MAAAA,K;;AACEC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;OACH;AAAEC,QAAAA,KAAF;AAASC,QAAAA,eAAT;AAA0BC,QAAAA,KAA1B;AAAiCC,QAAAA;AAAjC,O;;2BAEN;;sBAEaP,I,GAAN,MAAMA,IAAN,CAAU;AAAA;AAAA,wCAGK,IAHL;;AAAA,2CAIU,KAJV;;AAAA,wCAKK,IALL;AAAA;;AAKY;;AAKzB;AACJ;AACA;AACA;AACWQ,QAAAA,OAAO,CAACC,IAAD,EAAkB;AAC5B,eAAKC,IAAL,CAAUD,IAAV,IAAkBA,IAAlB;AACA;AAAA;AAAA,4CAAaE,QAAb,CAAsBC,QAAtB,CAA+B;AAAA;AAAA,sCAAUC,cAAzC,EAAwD,KAAKH,IAAL,CAAUD,IAAlE;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACWK,QAAAA,iBAAiB,CAACC,eAAD,EAAwBC,IAAxB,EAAoCC,SAApC,EAAqD;AACzE,cAAIC,SAAS,GAAC,KAAKR,IAAL,CAAUQ,SAAxB;;AACA,cAAGH,eAAe,GAACV,eAAe,CAACc,GAAnC,EAAuC;AACnCD,YAAAA,SAAS,CAACE,OAAV,IAAqBJ,IAArB;AACAE,YAAAA,SAAS,CAACG,GAAV,IAAkBJ,SAAlB;AACF,WAHF,MAGO,IAAGF,eAAe,GAACV,eAAe,CAACiB,GAAnC,EAAuC;AAC1CJ,YAAAA,SAAS,CAACK,OAAV,IAAqBP,IAArB;AACAE,YAAAA,SAAS,CAACM,GAAV,IAAiBP,SAAjB;AACF,WAHK,MAGA,IAAGF,eAAe,GAACV,eAAe,CAACoB,EAAnC,EAAsC;AACzCP,YAAAA,SAAS,CAACQ,MAAV,IAAoBV,IAApB;AACAE,YAAAA,SAAS,CAACS,EAAV,IAAgBV,SAAhB;AACF,WAHK,MAGA,IAAGF,eAAe,GAACV,eAAe,CAACuB,GAAnC,EAAuC;AAC1CV,YAAAA,SAAS,CAACW,OAAV,IAAqBb,IAArB;AACAE,YAAAA,SAAS,CAACY,GAAV,IAAiBb,SAAjB;AACF,WAHK,MAGA,IAAGF,eAAe,GAACV,eAAe,CAAC0B,IAAnC,EAAwC;AAC3Cb,YAAAA,SAAS,CAACc,QAAV,IAAsBhB,IAAtB;AACAE,YAAAA,SAAS,CAACe,IAAV,IAAkBhB,SAAlB;AACF,WAHK,MAGA,IAAGF,eAAe,GAACV,eAAe,CAAC6B,KAAnC,EAAyC;AAC5ChB,YAAAA,SAAS,CAACiB,SAAV,IAAuBnB,IAAvB;AACAE,YAAAA,SAAS,CAACkB,KAAV,IAAmBnB,SAAnB;AACF,WAHK,MAGA,IAAGF,eAAe,GAACV,eAAe,CAACgC,EAAnC,EAAsC;AACzCnB,YAAAA,SAAS,CAACoB,MAAV,IAAoBtB,IAApB;AACAE,YAAAA,SAAS,CAACqB,EAAV,IAAgBtB,SAAhB;AACF;AACL;;AAhDY,O;;sBAAJjB,I,cACmB,IAAIA,IAAJ,E","sourcesContent":["import proto from '../../Proto/proto.js';\r\nimport { EventManager } from '../UI/Common/Event/EventManager';\r\nimport { EventType } from '../UI/Common/Event/EventType';\r\nconst { NUser, AttrPromoteType, NItem, NRoom}=proto;\r\n\r\n// import { NUser, AttrPromoteType } from \"../../Proto/proto\";\r\n\r\nexport class User{\r\n    public static Instance:User=new User();\r\n\r\n    public user:NUser=null as unknown as NUser;\r\n    public isLogin:boolean=false;  //是否登录\r\n    public room:NRoom=null;  //房间\r\n\r\n\r\n      \r\n\r\n    /**\r\n     * 更改金币\r\n     * @param coin 金币 \r\n     */\r\n    public AddGold(coin:number):void{\r\n        this.user.coin += coin;\r\n        EventManager.Instance.dispatch(EventType.UserCoinChange,this.user.coin);\r\n    }\r\n    \r\n    /**\r\n     * 修改已选角色属性\r\n     * @param attrPromoteType 类型\r\n     * @param spot 属性点\r\n     */\r\n    public UpdateAttrPromote(attrPromoteType:number,spot:number,attrValue:number){\r\n        let character=this.user.character;\r\n        if(attrPromoteType=AttrPromoteType.Att){ \r\n            character.attSpot += spot;\r\n            character.att +=  attrValue;\r\n         }else if(attrPromoteType=AttrPromoteType.Def){\r\n            character.defSpot += spot;\r\n            character.def += attrValue; \r\n         }else if(attrPromoteType=AttrPromoteType.Hp){\r\n            character.hpSpot += spot;\r\n            character.hp += attrValue;\r\n         }else if(attrPromoteType=AttrPromoteType.Cri){\r\n            character.criSpot += spot;\r\n            character.cri += attrValue;\r\n         }else if(attrPromoteType=AttrPromoteType.Resu){\r\n            character.resuSpot += spot;\r\n            character.resu += attrValue;\r\n         }else if(attrPromoteType=AttrPromoteType.Speed){\r\n            character.speedSpot += spot;\r\n            character.speed += attrValue;\r\n         }else if(attrPromoteType=AttrPromoteType.Cd){\r\n            character.cdSpot += spot;\r\n            character.cd += attrValue; \r\n         }\r\n    }\r\n   \r\n    \r\n\r\n}"]}