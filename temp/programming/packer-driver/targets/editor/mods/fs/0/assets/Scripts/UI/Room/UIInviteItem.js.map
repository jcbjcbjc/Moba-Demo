{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Room/UIInviteItem.ts"],"names":["_decorator","Component","Sprite","Label","SystemEventType","proto","LoadResUtil","DataManager","EventManager","UIManager","ccclass","property","RoomUser","UIInviteItem","start","sprite","node","on","TOUCH_END","OnUserClcik","SetItemInfo","roomUser","spriteFrame","load_local_sprite","Instance","characters","cCharacterId","Avatar","nicknameLabel","string","nickName","uiCharacterDetail","show","SendCharacterDetail","userId","onDestroy","console","log","off","removeAll"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;AAAeC,MAAAA,e,OAAAA,e;;AACtDC,MAAAA,K;;AACEC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Y,iBAAAA,Y;;AAEAC,MAAAA,S,iBAAAA,S;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;OACxB;AAAEY,QAAAA;AAAF,O;;;;8BAGOC,Y,WADZH,OAAO,CAAC,cAAD,C,UAGHC,QAAQ,CAACT,MAAD,C,UAERS,QAAQ,CAACR,KAAD,C,oCALb,MACaU,YADb,SACkCZ,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,4CAOxB,IAPwB;AAAA;;AASxCa,QAAAA,KAAK,GAAI;AACL,cAAG,KAAKC,MAAL,CAAYC,IAAf,EAAoB;AAClB,iBAAKD,MAAL,CAAYC,IAAZ,CAAiBC,EAAjB,CAAoBb,eAAe,CAACc,SAApC,EAA8C,KAAKC,WAAnD,EAA+D,IAA/D;AACD;AACJ;;AAEuB,cAAXC,WAAW,CAACC,QAAD,EAAmB;AACvC,eAAKA,QAAL,GAAcA,QAAd;AACA,eAAKN,MAAL,CAAYO,WAAZ,GAAwB,MAAM;AAAA;AAAA,0CAAYC,iBAAZ,CAA8B;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,UAArB,CAAgCJ,QAAQ,CAACK,YAAzC,EAAuDC,MAAvD,GAA8D,cAA5F,CAA9B;AACA,eAAKC,aAAL,CAAmBC,MAAnB,GAA0BR,QAAQ,CAACS,QAAnC;AACH;;AAEwB,cAAXX,WAAW,GAAE;AACvB,cAAIY,iBAAiB,GAAG,MAAM;AAAA;AAAA,sCAAUP,QAAV,CAAmBQ,IAAnB,CAAwB,mBAAxB,CAA9B;AACAD,UAAAA,iBAAiB,CAACE,mBAAlB,CAAsC,KAAKZ,QAAL,CAAca,MAApD,EAA4D,CAA5D,EAA+D,CAA/D;AACH;;AAEDC,QAAAA,SAAS,GAAE;AACPC,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;;AACA,cAAG,KAAKtB,MAAL,CAAYC,IAAf,EAAoB;AAClB,iBAAKD,MAAL,CAAYC,IAAZ,CAAiBsB,GAAjB,CAAqBlC,eAAe,CAACc,SAArC,EAA+C,KAAKC,WAApD,EAAgE,IAAhE;AACD;;AACD;AAAA;AAAA,4CAAaK,QAAb,CAAsBe,SAAtB,CAAgC,IAAhC;AACH;;AAhCuC,O;;;;;iBAG1B,I;;;;;;;iBAEO,I","sourcesContent":["\r\nimport { _decorator, Component, Node, Sprite, Label, System, SystemEventType } from 'cc';\r\nimport proto from '../../../Proto/proto.js';\r\nimport { LoadResUtil } from '../../Utils/LoadResUtil';\r\nimport { DataManager } from '../../Managers/DataManager';\r\nimport { EventManager } from '../Common/Event/EventManager';\r\nimport { UICharacterDetail } from '../UICharacterDetail/UICharacterDetail';\r\nimport { UIManager } from '../Common/UIManager';\r\nconst { ccclass, property } = _decorator;\r\nconst { RoomUser } = proto;\r\n\r\n@ccclass('UIInviteItem')\r\nexport class UIInviteItem extends Component {\r\n   \r\n    @property(Sprite)\r\n    public sprite=null as unknown as Sprite;\r\n    @property(Label)\r\n    public nicknameLabel=null as unknown as Label;\r\n\r\n    public roomUser=null as unknown as RoomUser;\r\n\r\n    start () {\r\n        if(this.sprite.node){\r\n          this.sprite.node.on(SystemEventType.TOUCH_END,this.OnUserClcik,this);\r\n        }\r\n    }\r\n\r\n    public async SetItemInfo(roomUser:RoomUser){\r\n        this.roomUser=roomUser;\r\n        this.sprite.spriteFrame=await LoadResUtil.load_local_sprite(DataManager.Instance.characters[roomUser.cCharacterId].Avatar+'/spriteFrame');\r\n        this.nicknameLabel.string=roomUser.nickName;\r\n    }\r\n\r\n    private async OnUserClcik(){\r\n        let uiCharacterDetail = await UIManager.Instance.show(\"UICharacterDetail\") as UICharacterDetail;\r\n        uiCharacterDetail.SendCharacterDetail(this.roomUser.userId, 0, 2);\r\n    }\r\n\r\n    onDestroy(){ \r\n        console.log('onDestroy')\r\n        if(this.sprite.node){\r\n          this.sprite.node.off(SystemEventType.TOUCH_END,this.OnUserClcik,this);\r\n        }\r\n        EventManager.Instance.removeAll(this);\r\n    }\r\n}\r\n\r\n"]}