{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Bag/UIBagDetailItem.ts"],"names":["_decorator","Component","Node","Label","Sprite","proto","EventManager","DataManager","LoadResUtil","ccclass","property","NItem","BagHandleResponse","BagHandleType","Result","UIBagDetailItem","start","SetItemInfo","item","define","Instance","items","itemId","imgSprite","spriteFrame","load_local_sprite","Icon","nameLabel","string","Name","countLabel","count","priceLabel","node","active","isTran","descPos","descLabel","getPosition","money","setPosition","x","z","tranButton","cancelTranButton","Description","onDestroy","console","log","removeAll"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAcC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;;AAC9CC,MAAAA,K;;AAGEC,MAAAA,Y,iBAAAA,Y;;AAEAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OAUH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;OACxB;AAAEW,QAAAA,KAAF;AAASC,QAAAA,iBAAT;AAA4BC,QAAAA,aAA5B;AAA2CC,QAAAA;AAA3C,O;;;;iCAGOC,e,WADZN,OAAO,CAAC,iBAAD,C,UAGHC,QAAQ,CAACP,KAAD,C,UAERO,QAAQ,CAACP,KAAD,C,UAERO,QAAQ,CAACP,KAAD,C,UAERO,QAAQ,CAACP,KAAD,C,UAERO,QAAQ,CAACN,MAAD,C,UAERM,QAAQ,CAACR,IAAD,C,UAERQ,QAAQ,CAACR,IAAD,C,oCAfb,MACaa,eADb,SACqCd,SADrC,CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,0CAgB5B,IAhB4B;AAAA;;AAkB3Ce,QAAAA,KAAK,GAAI,CAER;;AAGuB,cAAXC,WAAW,CAACC,IAAD,EAAY;AAClC,eAAKC,MAAL,GAAa;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,KAArB,CAA2BH,IAAI,CAACI,MAAhC,CAAb;AACA,eAAKC,SAAL,CAAeC,WAAf,GAA2B,MAAM;AAAA;AAAA,0CAAYC,iBAAZ,CAA8B,KAAKN,MAAL,CAAYO,IAAZ,GAAiB,cAA/C,CAAjC;AACA,eAAKC,SAAL,CAAeC,MAAf,GAAsB,KAAKT,MAAL,CAAYU,IAAlC;AACA,eAAKC,UAAL,CAAgBF,MAAhB,GAAuB,QAAMV,IAAI,CAACa,KAAlC;AACA,eAAKC,UAAL,CAAgBC,IAAhB,CAAqBC,MAArB,GAA4BhB,IAAI,CAACiB,MAAjC;AACA,cAAIC,OAAO,GAAC,KAAKC,SAAL,CAAeJ,IAAf,CAAoBK,WAApB,EAAZ;;AACA,cAAGpB,IAAI,CAACiB,MAAR,EAAe;AAAG;AAChB,iBAAKH,UAAL,CAAgBJ,MAAhB,GAAuB,QAAMV,IAAI,CAACqB,KAAlC;AACA,iBAAKF,SAAL,CAAeJ,IAAf,CAAoBO,WAApB,CAAgCJ,OAAO,CAACK,CAAxC,EAA2C,CAAC,GAA5C,EAAiDL,OAAO,CAACM,CAAzD;AAEA,iBAAKC,UAAL,CAAgBT,MAAhB,GAAuB,KAAvB;AACA,iBAAKU,gBAAL,CAAsBV,MAAtB,GAA6B,IAA7B;AACD,WAND,MAMK;AACH;AACA,iBAAKG,SAAL,CAAeJ,IAAf,CAAoBO,WAApB,CAAgCJ,OAAO,CAACK,CAAxC,EAA2C,CAAC,EAA5C,EAAgDL,OAAO,CAACM,CAAxD;AAEA,iBAAKC,UAAL,CAAgBT,MAAhB,GAAuB,IAAvB;AACA,iBAAKU,gBAAL,CAAsBV,MAAtB,GAA6B,KAA7B;AACD;;AACD,eAAKG,SAAL,CAAeT,MAAf,GAAsB,QAAM,KAAKT,MAAL,CAAY0B,WAAxC;AACD;;AAEDC,QAAAA,SAAS,GAAE;AACPC,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA;AAAA;AAAA,4CAAa5B,QAAb,CAAsB6B,SAAtB,CAAgC,IAAhC;AACH;;AAjD0C,O;;;;;iBAG1B,I;;;;;;;iBAEC,I;;;;;;;iBAEA,I;;;;;;;iBAED,I;;;;;;;iBAEA,I;;;;;;;iBAEC,I;;;;;;;iBAEM,I","sourcesContent":["import { ListViewItem } from \"../Common/ListView/ListViewItem\";\r\n\r\nimport { _decorator, Component, Node, Prefab, Label, Sprite, SystemEventType, SpriteFrame } from 'cc';\r\nimport proto from '../../../Proto/proto.js';\r\nimport { UIWindow } from '../Common/UIWindow';\r\nimport { User } from '../../Models/User';\r\nimport { EventManager } from \"../Common/Event/EventManager\";\r\nimport { ListView } from \"../Common/ListView/ListView\";\r\nimport { DataManager } from \"../../Managers/DataManager\";\r\nimport { LoadResUtil } from \"../../Utils/LoadResUtil\";\r\nimport { EventType } from \"../Common/Event/EventType\";\r\nimport { ItemService } from \"../../Services/ItemService\";\r\nimport { MessageBox,MessageBoxType } from \"../Common/MessageBox\";\r\nimport { ItemDefine } from \"../../Data/ItemDefine\";\r\nimport { InputBox } from \"../Common/InputBox\";\r\nimport { Validate } from \"../../Utils/Validate\";\r\nimport { TipsManager } from \"../TipsManager\";\r\nimport { ItemManager } from \"../../Managers/ItemManager\";\r\nimport { UIBag } from \"./UIBag\";\r\nconst { ccclass, property } = _decorator;\r\nconst { NItem, BagHandleResponse, BagHandleType, Result } = proto;\r\n\r\n@ccclass('UIBagDetailItem')\r\nexport class UIBagDetailItem extends Component {\r\n\r\n    @property(Label)\r\n    public nameLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public countLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public priceLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public descLabel=null as unknown as Label;\r\n    @property(Sprite)\r\n    public imgSprite=null as unknown as Sprite;\r\n    @property(Node)\r\n    public tranButton=null as unknown as Node; \r\n    @property(Node)\r\n    public cancelTranButton=null as unknown as Node; \r\n    private define=null as unknown as ItemDefine; \r\n\r\n    start () {\r\n      \r\n    }\r\n\r\n\r\n    public async SetItemInfo(item:NItem){\r\n      this.define= DataManager.Instance.items[item.itemId];\r\n      this.imgSprite.spriteFrame=await LoadResUtil.load_local_sprite(this.define.Icon+'/spriteFrame');\r\n      this.nameLabel.string=this.define.Name;\r\n      this.countLabel.string='数量：'+item.count;\r\n      this.priceLabel.node.active=item.isTran;\r\n      let descPos=this.descLabel.node.getPosition();\r\n      if(item.isTran){  //交易\r\n        this.priceLabel.string='价格：'+item.money;\r\n        this.descLabel.node.setPosition(descPos.x, -118, descPos.z);  \r\n\r\n        this.tranButton.active=false;\r\n        this.cancelTranButton.active=true;\r\n      }else{\r\n        //未交易设置描述位置\r\n        this.descLabel.node.setPosition(descPos.x, -78, descPos.z);  \r\n        \r\n        this.tranButton.active=true;\r\n        this.cancelTranButton.active=false;\r\n      }\r\n      this.descLabel.string='描述：'+this.define.Description;\r\n    }\r\n\r\n    onDestroy(){\r\n        console.log('onDestroy')\r\n        EventManager.Instance.removeAll(this);\r\n    }\r\n}"]}