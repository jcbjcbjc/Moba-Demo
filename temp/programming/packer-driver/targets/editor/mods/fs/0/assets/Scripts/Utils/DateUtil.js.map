{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/Utils/DateUtil.ts"],"names":["DateUtil","InitExtend","Date","prototype","format","fmt","o","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","Math","floor","hour","week","getDay","h","parseInt","k","RegExp","test","len","$1","length","replace","substr","toWeiXinString","str","now","today","yesterday","beforeYesterday","monday","setDate","getTime"],"mappings":"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","sourcesContent":["/**\r\n * 日期工具类\r\n */\r\nexport class DateUtil{\r\n\r\n    /**\r\n     * 初始化扩展方法\r\n     */\r\n   public static InitExtend(){\r\n       /*\r\n对Date的扩展，将 Date 转化为指定格式的String\r\n月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q)可以用1-2个占位符\r\n年(y)可以用1-4个占位符，毫秒(S)只能用1个占位符号(是1-3为的数字)\r\n例子：\r\n(new Date()).Format(\"yyyy-MM-dd hh:mm:ss.S\")\t==> 2006-07-02 08:09:04.423\r\n(new Date()).Format(\"yyyy-M-d h:m:s.S\")\t\t\t==> 2006-7-2 8:9:4.18\r\n*/\r\nDate.prototype.format = function(fmt) {\r\n\tconst o = {\r\n\t\t\"y+\": this.getFullYear(),\r\n\t\t\"M+\": this.getMonth()+1,\r\n\t\t\"d+\": this.getDate(),\r\n\t\t\"H+\": this.getHours(),\r\n\t\t\"m+\": this.getMinutes(),\r\n\t\t\"s+\": this.getSeconds(),\r\n\t\t\"S+\": this.getMilliseconds(),\r\n\t\t\"q+\": Math.floor(this.getMonth()/3) + 1,\r\n\t\t\"h+\": (()=>{\r\n\t\t\tconst hour=this.getHours()%12;\r\n\t\t\treturn hour==0?12:hour;\r\n\t\t})(),\r\n\t\t\"E+\": (()=>{\r\n\t\t\tconst week = {\"0\":\"Sunday\",\"1\":\"Monday\",\"2\":\"Tuesday\",\"3\":\"Wednesday\",\"4\":\"Thursday\",\"5\":\"Friday\",\"6\":\"Saturday\"}; \r\n\t\t\treturn week[this.getDay()+\"\"];\r\n\t\t})(),\r\n\t\t/*\r\n\t\t\"e+\": (()=>{\r\n\t\t\tconst week = {\"0\":\"Sun\",\"1\":\"Mon\",\"2\":\"Tue\",\"3\":\"Wed\",\"4\":\"Thu\",\"5\":\"Fri\",\"6\":\"Sat\"}; \r\n\t\t\treturn week[this.getDay()+\"\"];\r\n\t\t})(),\r\n\t\t*/\r\n\t\t\"x1\": (()=>{\r\n\t\t\tconst week = {\"0\":\"周日\",\"1\":\"周一\",\"2\":\"周二\",\"3\":\"周三\",\"4\":\"周四\",\"5\":\"周五\",\"6\":\"周六\"}; \r\n\t\t\treturn week[this.getDay()+\"\"];\r\n\t\t})(),\r\n\t\t\"x2\": (()=>{\r\n\t\t\tconst hour = [\"凌晨\",\"早上\",\"下午\",\"晚上\"];\r\n\t\t\tconst h=this.getHours();\r\n\t\t\tif(h==12) return \"中午\";\r\n\t\t\treturn hour[parseInt(h/6)];\r\n\t\t})(),\r\n\t}\r\n\tfor(var k in o) {\r\n\t\tif(new RegExp(\"(\"+k+\")\", \"g\").test(fmt)) {\r\n\t\t\tconst len = RegExp.$1.length;\r\n\t\t\tfmt = fmt.replace(RegExp.$1, len==1?o[k]:(\"00\"+o[k]).substr(-len));\r\n\t\t}\r\n\t}\r\n\treturn fmt;\r\n}\r\nDate.prototype.toWeiXinString = function() {\r\n\tlet str;\r\n\tconst now = new Date();\r\n\tconst today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\tconst yesterday = new Date(now.getFullYear(), now.getMonth(), now.getDate()-1);\r\n\tconst beforeYesterday = new Date(now.getFullYear(), now.getMonth(), now.getDate()-2);\r\n\tconst monday = new Date(today);\r\n\tmonday.setDate(today.getDate()-(today.getDay()?today.getDay()-1:6));\r\n\t//注意：date初始化默认是按本地时间初始的，但打印默认却是按GMT时间打印的，也就是说打印出的不是本地现在的时间\r\n\t//LocaleString的打印也有点问题，\"0点\"会被打印为\"上午12点\"\r\n\tif(this.getTime() > today.getTime()) {\r\n\t\tstr = \"\";\r\n\t} else if(this.getTime() > yesterday.getTime()) {\r\n\t\tstr = \"昨天\";\r\n\t} else if(this.getTime() > beforeYesterday.getTime()) {\r\n\t\tstr = \"前天\";\r\n\t} else if(this.getTime() > monday.getTime()) {\r\n\t\tconst week = {\"0\":\"周日\",\"1\":\"周一\",\"2\":\"周二\",\"3\":\"周三\",\"4\":\"周四\",\"5\":\"周五\",\"6\":\"周六\"}; \r\n\t\tstr = week[this.getDay()+\"\"];\r\n\t} else {\r\n\t\tconst hour = [\"凌晨\",\"早上\",\"下午\",\"晚上\"];\r\n\t\tconst h=this.getHours();\r\n\t\tif(h==12) str = \"中午\";\r\n\t\telse str = hour[parseInt(h/6)];\r\n\t\tstr = this.format(\"MM月dd \") + str;\r\n\t}\r\n\tstr += this.format(\"HH:mm\");\r\n\treturn str;\r\n}\r\n   }\r\n   \r\n}"]}