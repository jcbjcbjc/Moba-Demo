{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Auction/UIAuctionDetailItem.ts"],"names":["_decorator","Component","Node","Label","Sprite","SystemEventType","proto","EventManager","LoadResUtil","UIManager","ccclass","property","NItem","Result","NAuctionItem","UIAuctionDetailItem","start","bidderNickNameLabel","node","on","TOUCH_END","OnBidderNickNameClick","console","log","uiCharacterDetail","Instance","show","SendCharacterDetail","item","bidderUserId","SetItemInfo","itemDefine","index","uiAuction","imgSprite","spriteFrame","load_local_sprite","Icon","nameLabel","string","Name","countLabel","count","biddingPriceLabel","biddingPrice","currentPriceLabel","currentPrice","bidderNickName","active","descLabel","Description","remainingTimeNode","remainingTime","onDestroy","removeAll"],"mappings":"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","sourcesContent":["import { ListViewItem } from \"../Common/ListView/ListViewItem\";\r\n\r\nimport { _decorator, Component, Node, Prefab, Label, Sprite, SystemEventType, SpriteFrame, Button, Vec3 } from 'cc';\r\nimport proto from '../../../Proto/proto.js';\r\nimport { UIWindow } from '../Common/UIWindow';\r\nimport { User } from '../../Models/User';\r\nimport { EventManager } from \"../Common/Event/EventManager\";\r\nimport { ListView } from \"../Common/ListView/ListView\";\r\nimport { DataManager } from \"../../Managers/DataManager\";\r\nimport { LoadResUtil } from \"../../Utils/LoadResUtil\";\r\nimport { EventType } from \"../Common/Event/EventType\";\r\nimport { ItemService } from \"../../Services/ItemService\";\r\nimport { MessageBox,MessageBoxType } from \"../Common/MessageBox\";\r\nimport { ItemDefine } from \"../../Data/ItemDefine\";\r\nimport { InputBox } from \"../Common/InputBox\";\r\nimport { Validate } from \"../../Utils/Validate\";\r\nimport { TipsManager } from \"../TipsManager\";\r\nimport { ItemManager } from \"../../Managers/ItemManager\";\r\nimport { UIAuction } from \"./UIAuction\";\r\nimport { ShopItemDefine } from \"../../Data/ShopItemDefine\";\r\nimport { UIManager } from '../Common/UIManager';\r\nimport { UICharacterDetail } from \"../UICharacterDetail/UICharacterDetail\";\r\nconst { ccclass, property } = _decorator;\r\nconst { NItem, Result, NAuctionItem } = proto;\r\n\r\n@ccclass('UIAuctionDetailItem')\r\nexport class UIAuctionDetailItem extends Component {\r\n\r\n    @property(Label)\r\n    public nameLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public countLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public biddingPriceLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public currentPriceLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public bidderNickNameLabel=null as unknown as Label;\r\n    @property(Label)\r\n    public descLabel=null as unknown as Label;\r\n    @property(Sprite)\r\n    public imgSprite=null as unknown as Sprite;\r\n    @property(Node)\r\n    public remainingTimeNode=null as unknown as Node;\r\n\r\n    private index:number=0;\r\n    private itemDefine=null as unknown as ItemDefine; \r\n    private uiAuction=null as unknown as UIAuction; \r\n    private item=null as unknown as NAuctionItem;\r\n\r\n    // private descPos=null as unknown as Vec3;  //描述位置\r\n    start () {\r\n      // this.descPos = this.descLabel.node.getPosition();\r\n      // this.descPos.y -= 20;\r\n      this.bidderNickNameLabel.node.on(SystemEventType.TOUCH_END,this.OnBidderNickNameClick,this);\r\n    }  \r\n\r\n    /**\r\n     * 竞拍者昵称点击\r\n     */\r\n    private async OnBidderNickNameClick(){\r\n      console.log('OnBidderNickNameClick')\r\n       let uiCharacterDetail = await UIManager.Instance.show(\"UICharacterDetail\") as UICharacterDetail;\r\n       uiCharacterDetail.SendCharacterDetail(this.item.bidderUserId, 0, 2); \r\n    }\r\n\r\n \r\n    public async SetItemInfo(item: NAuctionItem, itemDefine:ItemDefine, index:number=-1, uiAuction:UIAuction){\r\n      this.item=item;\r\n      if(index != -1){\r\n        this.index=index;\r\n      }\r\n      this.uiAuction=uiAuction;\r\n      this.itemDefine= itemDefine;\r\n      this.imgSprite.spriteFrame=await LoadResUtil.load_local_sprite(this.itemDefine.Icon+'/spriteFrame');\r\n      this.nameLabel.string=this.itemDefine.Name;\r\n      this.countLabel.string='数量：'+item.count;\r\n      this.biddingPriceLabel.string='竞拍价：'+item.biddingPrice;\r\n      this.currentPriceLabel.string='现价：'+item.currentPrice;\r\n      this.bidderNickNameLabel.string='出价者：'+item.bidderNickName;\r\n      this.currentPriceLabel.node.active=item.bidderUserId?true:false;\r\n      this.bidderNickNameLabel.node.active=item.bidderUserId?true:false;\r\n\r\n      this.descLabel.string='描述：'+this.itemDefine.Description;\r\n      // this.descLabel.node.setPosition(this.descPos);\r\n      this.remainingTimeNode.active=item.remainingTime <= 60000;\r\n    }\r\n\r\n    onDestroy(){\r\n        console.log('onDestroy')\r\n        EventManager.Instance.removeAll(this);\r\n    }\r\n}"]}