{"version":3,"sources":["file:///D:/LearningFrameWork/MobaYan/Moba/Src/Client/assets/Scripts/UI/Battle/Attribute/Attributes.ts"],"names":["Attributes","proto","AttributeData","AttributeType","CreatureType","NUser","TeamType","HP","hp","value","Math","min","MaxHP","Final","ATT","DEF","RESU","Speed","CRI","InitFinalAttributes","i","MAX","Data","Basic","Buff","InitBasicAttributes","define","user","creatureType","Reset","Character","character","att","def","resu","speedValue","cri","Monster"],"mappings":"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","sourcesContent":["import proto from \"../../../../Proto/proto.js\";\r\nimport { AttributeData } from \"./AttributeData\";\r\nimport { AttributeType } from \"./AttributeType\";\r\nimport { CharacterDefine } from \"../../../Data/CharacterDefine\";\r\nimport { CreatureType } from \"../enums/CreatureType\";\r\nconst { NUser, TeamType } = proto;\r\n\r\nexport class Attributes{\r\n    public Basic = new AttributeData();   //基础\r\n    public Buff = new AttributeData();   //buff\r\n    public Final = new AttributeData();   //常用\r\n    private hp:number;     //当前hp\r\n\r\n    /**\r\n     * 当前生命\r\n     */\r\n    public get HP(){\r\n        return this.hp;\r\n    }\r\n    public set HP(value:number){\r\n        this.hp = Math.min(this.MaxHP, value);\r\n    }\r\n    \r\n    /**\r\n     * 最大生命\r\n     */\r\n    public get MaxHP(){\r\n        return this.Final.MaxHP;\r\n    }\r\n\r\n    /**\r\n     * 攻击\r\n     */\r\n    public get ATT(){\r\n        return this.Final.ATT;\r\n    }\r\n\r\n    /**\r\n     * 防御\r\n     */\r\n    public get DEF(){\r\n        return this.Final.DEF;\r\n    }\r\n\r\n    /**\r\n     * 复活率\r\n     */\r\n    public get RESU(){\r\n        return this.Final.RESU;\r\n    }\r\n\r\n    /**\r\n     * 速度\r\n     */\r\n    public get Speed(){\r\n        return this.Final.Speed;\r\n    }\r\n\r\n    /**\r\n     * 暴击率\r\n     */\r\n    public get CRI(){\r\n        return this.Final.CRI;\r\n    }\r\n\r\n    /**\r\n     * 初始化常用属性\r\n     */\r\n    public InitFinalAttributes() {\r\n       for(let i = 0; i < AttributeType.MAX; i++)\r\n       {\r\n          this.Final.Data[i] = this.Basic.Data[i] + this.Buff.Data[i];\r\n       }\r\n    }\r\n\r\n    /**\r\n     * 初始化基础属性\r\n     */\r\n    public InitBasicAttributes(define: CharacterDefine, user: NUser,creatureType: CreatureType){\r\n        this.Basic.Reset();\r\n        this.Buff.Reset();\r\n        this.Final.Reset();\r\n        if (creatureType == CreatureType.Character) {\r\n            this.hp=this.Basic.MaxHP=user.character.hp;\r\n            this.Basic.ATT = user.character.att;\r\n            this.Basic.DEF = user.character.def;\r\n            this.Basic.RESU = user.character.resu;\r\n            this.Basic.Speed = user.character.speedValue;\r\n            this.Basic.CRI = user.character.cri;\r\n\r\n            // console.log('InitBasicAttributes Speed='+this.Basic.Speed)\r\n        } else if (creatureType == CreatureType.Monster) {\r\n            this.hp=this.Basic.MaxHP=define.HP;\r\n            this.Basic.ATT = define.ATT;\r\n            this.Basic.DEF = define.DEF;\r\n            this.Basic.RESU = define.RESU;\r\n            this.Basic.Speed = define.Speed;\r\n            this.Basic.CRI = define.CRI;\r\n        }\r\n        this.InitFinalAttributes();\r\n    }\r\n\r\n\r\n}"]}